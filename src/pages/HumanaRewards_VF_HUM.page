<!--
Page Name        : HumanaRewards_VF_HUM
Version          : 1.0
Created Date     : 02/13/2020
Function         : This Page is used to display the Humana Rewards Details.
Modification Log :
* Developer               Code Review                     Date                 Description
* ------------------------------------------------------------------------------------------------------------------------------
* Imran                                                  02/13/2019          REQ - 849324 Added Humana Rewards Program, Eligible Activities,
Rewards EarnedRewards and Redeemed section on details page sections.
* Anjani Vaddadi                                         04/27/2020          REQ - 734888 Added the help Hover text in Eligibilities as per 
                                                                             the revised mockup
* Anjani Vaddadi                                         05/15/2020          Defect Fix-729
* Pinky Vijur                                            08/24/2023          User Story 4647305: T1PRJ0891742 - VIT19761200 -TECH - Data Table Upgrade - File Clean Up
-------------------------------------------------------------------------------------------------------------------------------->
<apex:page id="thePage" controller="HumanaRewards_C_HUM" sidebar="false" showheader="true" tabstyle="Account">    
<apex:includeScript value="/support/console/41.0/integration.js" />
<apex:includeScript value="{!URLFOR($Resource.CRM_JQUERY, 'jquery.min.js')}" />
<apex:includeScript value="{!URLFOR($Resource.CRM_DataTables_1_13_4, 'datatables.min.js')}" />
<apex:includeScript value="{!URLFOR($Resource.html2canvas, '/html2canvas.js')}" />
<apex:includeScript value="{!URLFOR($Resource.html2canvas, '/jquery.plugin.html2canvas.js')}" />    
<apex:stylesheet value="{!URLFOR($Resource.CRM_PLATFORM_TOOLKIT, '/CSS/HoverOver.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.CRM_PLATFORM_TOOLKIT,'/Logging/css/LoggingCompCSS.css')}" />   
<link rel="stylesheet" type="text/css" href="{!URLFOR($Resource.CRM_DataTables_1_13_4, 'datatables.min.css')}" />
<apex:includeScript value="{!URLFOR($Resource.HumanaRewards_SR_HUM,'/HumanaRewards_JS_HUM.js')}" id="HUM"/>
<apex:stylesheet value="{!URLFOR($Resource.HumanaRewards_SR_HUM, '/HumanaRewards_CSS_HUM.css')}" />
  

            <!--Code should Stay in the page-->
            <script type="text/javascript">
              var RewardPage = null;
              //var cj$ = jQuery.noConflict();
              jQuery(document).ready(function () {
              RewardPage = new HumanaRewardPage();
              RewardPage.imagesrc = '{!$Resource.HUMHoverOverQuestionMark}';
              RewardPage.render();
              //RewardPage.recall();
              });
              window.onload = function(){         window.scrollTo(0,0);     };

            </script>


            <div id="loggingStickyHeader" class="LoggingCompCSS" style="width:99%;  margin-bottom: 6px; margin-top: 6px;">
                <apex:outputPanel id="displayTheLogging" rendered="true">
                    <c:Logging_CMP_HUM DisplayMessage="true"  Logging_Color="red" AttachmentDesc="{!sEnterpriseID}" AttachmentKey="{!sEnterpriseID}" Logged_Item_Color="blue" Screenshot_Area_Id="pageContent" RecordId="{!sRecordId}" />
                </apex:outputPanel>
            </div>
            <div class="col-xs-12" style="font-size:16px">
                <div id="opaque" />
                <div id="spinner">
                    <p align="center" style='{font-family:"Arial", Helvetica, sans-serif; color:white; font-size:20px;}'>
                        <apex:image value="/img/loading.gif" id="LoadingImageId" />
                        <span style="margin-left :5px;">Loading...</span>
                    </p>
                </div>
            </div>
            <div id="pageContent" class="pageContent">

                <apex:form style="font-size:12px" id="ID2">
                    <div id="screenshotdata" style="background:white;">
                      <table  id="rewardsHeader" class="pageHeader enable_logging"  style="display:block" width ="100%">
                        <tr>
                          <td colspan="2">
                            <apex:sectionheader title="Humana Rewards" subtitle="{!sAccountName }"/>
                          </td>
                        </tr>
                      </table>
                        <apex:outputPanel id="pnlDetails">
                            <apex:pageBlock mode="maindetail" id="ID3">
                              
                                <apex:pageBlock mode="maindetail" id="Rewards">
                                    <apex:outputPanel id="stdMap">
                                        <input type="hidden" id="StandardMapValuesForLogging" value="{!standardMapvalue}" />
                                    </apex:outputPanel>
                                    <apex:outputPanel >
                                    
                                        <apex:pageblockSection id="HUMRewardsprogram" title="Humana Rewards Program" collapsible="true" columns="2">
                                           
                                            <apex:pageBlockSectionItem id="RPop2">
                                                <apex:outputlabel value="Rewards Year" styleClass="HumanaRewardsProgram"/>
                                                <apex:actionRegion >
                                                 <div id= "inputcatcher">
                                       <input type="hidden" value="{!MemberYear}" id="yearvalue"  />
                                      
                                                
                                                    <apex:selectList id="year" size="1" value="{!MemberYear}" label="Eligibility date" styleClass="rewardYear pcop_disable_while_logging pcin_disable_while_logging pcrec_disable_while_logging">
                                                        <apex:selectOptions value="{!dropdown}" id="h6" />
                                                        <apex:actionSupport event="onchange" oncomplete="RewardPage.setidAttribute();" action="{!rewardOnloadrequest}" reRender="eActivities,RewEarned,RewRedeemed,EdateId,Rewards" />
                                                        <apex:param name="savingoption" assignTo="{!MemberYear}" value="{!MemberYear}"></apex:param>
                                                    </apex:selectList>
                                                     </div>
                                                </apex:actionRegion>
                                            </apex:pageBlockSectionItem><br />


                                            <!--Refresh start  -->
                                            
                                            <apex:pageblocksectionitem id="idEligible">
                                                <apex:outputlabel value="Eligible" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.Eligible}" id="eligibleId" />
                                            </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem id="idAcStatus">
                                                <apex:outputlabel value="Account Status" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.Accountstatus}" id="AcStatid" />
                                            </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem id="idFVendorName">
                                                <apex:outputlabel value="Fulfilment Vendor Name" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.FullfilmentVendorName}" id="FVendorNameid" />
                                            </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem id="idCuurentRewards">
                                                <apex:outputlabel value="Current Reward Level" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.CurrentrewardLevel}" id="CuurentRewardsid" />
                                            </apex:pageblocksectionitem>
                                          <apex:pageblocksectionitem >
                                            <apex:outputlabel value="Member Enrolled Date" styleClass="HumanaRewardsProgram"/>
                                            <apex:outputtext value="{!oRewardDetailsDTO.MemberEnrolledDate}" />
                                          </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem id="idCurrentBal">
                                                <apex:outputlabel value="Current Balance" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.CurrentBalance}" id="CurrentBalid" />
                                            </apex:pageblocksectionitem>
                                          <apex:pageblocksectionitem >
                                            <apex:outputlabel value="Eligibility date" styleClass="HumanaRewardsProgram"/>
                                            <apex:outputtext value="{!oRewardDetailsDTO.EligibilityDate1}" id="EdateId" />
                                          </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem >
                                                <apex:outputlabel value="Fulfilment Vendor Hours of Operation" styleClass="HumanaRewardsProgram" />
                                                <apex:outputtext value="{!oRewardDetailsDTO.FullfilmentVendorHoursofoperation}" />
                                            </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem >
                                                <apex:outputlabel value="Member Cancelled Date" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.MemberCancelledDate}" />
                                            </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem >
                                                <apex:outputlabel value="Fulfilment Vendor External Phone Number" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.FullfilmentVendorExternalPhoneNumber}" />
                                            </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem >
                                                <apex:outputlabel value="Member Termination Date" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.MemberTerminationDate}" />
                                            </apex:pageblocksectionitem>
                                            <apex:pageblocksectionitem >
                                                <apex:outputlabel value="Fulfilment Vendor Internal Phone Number" styleClass="HumanaRewardsProgram"/>
                                                <apex:outputtext value="{!oRewardDetailsDTO.FullfilmentVendorInternalPhoneNumber}" />
                                            </apex:pageblocksectionitem>

                                            <!--Refresh end  -->
                                        </apex:pageblockSection>
                                    </apex:outputPanel>
                                </apex:pageBlock>

                                <apex:outputPanel >
                                    <apex:pageBlockSection columns="1" title="Eligible Activities" id="eActivities">
                                      <apex:outputPanel styleClass="vfHelpText" id="hoverOverArea1" style="margin-top: -22px;margin-left: 105px;float: left;" >
                                        <a onclick="javascript:return false;" html-log_this="false">
                                          <apex:image id="lnkImg1" height="12" width="12" style="" styleClass="imgMargin hoverimagesize" value="{!$Resource.HUMHoverOverQuestionMark}"/>
                                          <apex:outputPanel styleClass="hoverfontstyle" style="height: 22px;width: 450px;border: -4px solid orange;top: 0px;background-color: #FEFDB9;">
                                            {!$Label.HUMRewardsHoverOver}
                                          </apex:outputPanel>
                                        </a>
                                      </apex:outputPanel>
                                        <apex:panelGrid columns="1" border="0" width="100%">
                                            <apex:outputPanel id="dataTableSection">
                                              <div>
                                                <span style="font-size: 12px; color:Black; font-weight:bold" class="navbar-brand ">Filter By:</span>
                                              </div>
                                              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                                <div class="form-group">
                                                  <input style="width:200px;margin-top:3px;" type="text" class="InputSearch form-control" disabled="true" placeholder="Keyword" id="keyword" onkeydown="if (event.keyCode == 13) { return false; }" onkeyup="RewardPage.filterbytable(this.value,this.id)" />
                                                </div>
                                              </div>
                                                <table id="pcop" class="table table-striped table-bordered table-hover nowrap enable_logging dataTable no-footer dtr-column">
                                                    <thead>
                                                        <tr class="header">
                                                            <th> Earning Opportunity </th>
                                                            <th>  Eligibility Date </th>
                                                            <th> Potential Points To Earn</th>
                                                            <th> Maximum Earning   </th>
                                                        </tr>
                                                   </thead>
                                                    <tbody>
                                                        <apex:repeat value="{!listEligAct}" var="Eligibility">
                                                            <tr>
                                                                <td>{!Eligibility.EarningOpportunity1}</td>
                                                                <td>{!Eligibility.EligibilityDate2}</td>
                                                                <td>{!Eligibility.PotentialPointsToEarn}</td>
                                                                <td>{!Eligibility.MaximumEarnings}</td>
                                                            </tr>
                                                        </apex:repeat>
                                                    </tbody>
                                                </table>
                                            </apex:outputPanel>
                                        </apex:panelGrid>
                                    </apex:pageBlockSection>
                                </apex:outputPanel>


                                <apex:outputPanel >
                                    <apex:pageBlockSection columns="1" title="Rewards Earned" id="RewEarned">
                                        <apex:panelGrid columns="1" border="0" width="100%">
                                            <apex:outputPanel id="opCommRecs">
                                              <div>
                                                <span style="font-size: 12px; color:Black; font-weight:bold" class="navbar-brand ">Filter By:</span>
                                              </div>
                                              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                                <div class="form-group">
                                                  <input style="width:200px;margin-top:3px;" type="text" class="InputSearch form-control" disabled="true" placeholder="Keyword" id="keyword1" onkeydown="if (event.keyCode == 13) { return false; }" onkeyup="RewardPage.filterbytable(this.value,this.id)" />
                                                </div>
                                              </div>
                                                <table id="pcin" class="table table-striped table-bordered table-hover nowrap enable_logging dataTable no-footer dtr-column">
                                                    <thead>
                                                        <tr class="header">
                                                            <th> Earning Opportunity </th>
                                                            <th>  Completion Date </th>
                                                           <th> Points/Rewards Earned   </th>
                                                            <th> Timeframe to Redeem Points/Earnings   </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <apex:repeat value="{!listRewEarned}" var="Earned">
                                                            <tr>
                                                                <td>{!Earned.EarningOpportunity2}</td>
                                                                <td>{!Earned.CompletionDate}</td>
                                                                <td>{!Earned.Points_RewardsEarned}</td>
                                                                <td>{!Earned.TimeFrameforRedeemedpoints_Earnings}</td>
                                                            </tr>
                                                        </apex:repeat>
                                                    </tbody>
                                                </table>
                                            </apex:outputPanel>
                                        </apex:panelGrid>
                                    </apex:pageBlockSection>
                                </apex:outputPanel>


                                <apex:outputPanel >
                                    <apex:pageBlockSection columns="1" title="Rewards Redeemed" id="RewRedeemed">
                                        <apex:panelGrid columns="1" border="0" width="100%">
                                            <apex:outputPanel id="opCommRecs">
                                              <div>
                                                <span style="font-size: 12px; color:Black; font-weight:bold" class="navbar-brand ">Filter By:</span>
                                              </div>
                                              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                                <div class="form-group">
                                                  <input style="width:200px;margin-top:3px;" type="text" class="form-control InputSearch" disabled="true" placeholder="Keyword" id="keyword2" onkeydown="if (event.keyCode == 13) { return false; }" onkeyup="RewardPage.filterbytable(this.value,this.id)" />
                                                </div>
                                              </div>
                                                <table id="pcrec" class="table table-striped table-bordered table-hover nowrap enable_logging dataTable no-footer dtr-column">
                                                    <thead>
                                                        <tr class="header">
                                                            <th> Points/Rewards Redeemed </th>
                                                            <th> Redemption Date </th>
                                                            <th> Redemption Item </th>
                                                            <th> Purchase Price </th>
                                                            <th> Confirmation Number </th>
                                                            <th> Reward Mailing Address </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <apex:repeat value="{!listRewRedeem}" var="Reedem">
                                                            <tr>
                                                                <td>{!Reedem.Points_Rewardsredeemed}</td>
                                                                <td>{!Reedem.RedemptionDate}</td>
                                                                <td>{!Reedem.RedemptionItem}</td>
                                                                <td>{!Reedem.PurchasePrice}</td>
                                                                <td>{!Reedem.ConfirmationNumber}</td>
                                                                <td>{!Reedem.RewardMailingAddress}</td>
                                                            </tr>
                                                        </apex:repeat>
                                                    </tbody>
                                                </table>
                                            </apex:outputPanel>
                                        </apex:panelGrid>
                                    </apex:pageBlockSection>
                                </apex:outputPanel>

                            </apex:pageBlock>
                        </apex:outputPanel>
                    </div>
                    <br />
                    <apex:pagemessages ></apex:pagemessages>
                    <apex:actionFunction name="callServiceOnLoad" action="{!rewardOnloadrequest}" oncomplete="RewardPage.setidAttribute();" id="onLoadReq" rerender="eActivities,RewEarned,RewRedeemed,EdateId,Rewards">
                        <apex:Param id="year" assignTo="{!MemberYear}" value="" name="yearVF" />
                    </apex:actionFunction>
                    <!--<apex:actionFunction name="initiateAgain" action="{!initiateRequest}" rerender="ErrorMessage, WarningMessage, dataTableSection"  id="initiateAgainAFId"/>    -->

                </apex:form>
            </div>

        </apex:page>