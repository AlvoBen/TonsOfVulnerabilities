<!--
Page Name        : PharmacyBenefits_VF_HUM.page
Version          : 1.0
Created On       : May 05, 2017
Function         : VF page to display Pharmacy Benefits Information

Modification Log: 
* Developer Name           Code Review                 Date                         Description
*------------------------------------------------------------------------------------------------------------------------------
* Joel George                                         05/10/2017                    Original Version
* Joel George               125710                    06/20/2017                    Req 305017 - Page enhancement
* Lakshmi Madduri									  10/30/2019					New Section - Pharmacy Mail order
* Rakesh Patni                                        11/04/2019                    REQ - 408160 . Logging in Pharmacy Benefits and Authorizations Page. 
* Riya Agarwal									      30/04/2020					REQ - 729137 - MF 23 - Humana Pharmacy InComm- adding the hyperlink for the OTC ‘Benefit Type’ field when it equals ‘RxNova’  
* Sayali Nemade                                       6/2/2020                      DF - 833 Defect Fix - Pharmacy Benefit and Authorization heading is getting hidden after Logging
* Riya Agarwal                                        6/2/2020                      DF - 835 Defect Fix - RxNova Label getting Logged without selecting 
* Samruddhi Rathi									  02/10/2021				    REQ - 1669824 - CR AEP Readiness Critical Security Issues 
* Swapnali Sonawane                                   07/30/2021 				    REQ - 1801279 - MVP MF 6 - Pharmacy Benefit and Authorizations Page Covio
* Nirmal Garg										   09/16/2021					Added browser logic for coveo
* Ravikanth Samudrala                                 04/26/2022                    3324565-T1PRJ0272548 - SF Legacy API Retirement Upgrade API Version for Integrationjs Pharmacy Benefits & Authorizations
* Kalyani Pachpol                                      11/04/2022                   REQ-3578534
* Pinky Vijur                                           01/23/2023                User Story 3578587: T1PRJ0870026 Solutran Integrations - CRM FR5.01 - TECH - Remove CRM Service coding related to InComm OTC Balance
* Tharun Madishetti                                    07/14/2023                  US-4647281: T1PRJ0891742 - VIT19761200 - Data Table Upgrade - Pharmacy (Group 1)
****************************************************************************************************************************
-->
<apex:page id="vfpBenefits" tabStyle="Policy_Member__c" showHeader="false" sidebar="false" controller="PharmacyBenefits_C_HUM" action="{!getPolicyMemberData}">
	<apex:includeScript value="/support/console/54.0/integration.js"/>   

	<apex:includeScript value="{!URLFOR($Resource.CRM_JQUERY, 'jquery.min.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.CRM_DataTables_1_13_4, 'datatables.min.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.html2canvas, '/html2canvas.min.js')}"/>  
  <apex:includeScript value="{!URLFOR($Resource.CRM_DataTables_1_13_4, '/DataTables-1.13.4/js/jquery.dataTables.min.js')}"/>
	
	<apex:includescript value="{!URLFOR($Resource.PharmacyBenefitsAndAuthorizations_SR_HUM,'PharmacyBenefitsAndAuthorizations_SR_HUM/JS/PharmacyBenfitsAndAuthorizations.js')}"/>   
	<link rel="stylesheet" text="text/css" href="{!URLFOR($Resource.CRM_PLATFORM_TOOLKIT,'/Logging/css/LoggingCompCSS.css')}"/>
	<link rel="stylesheet" text="text/css" href="{!URLFOR($Resource.PharmacyBenefitsAndAuthorizations_SR_HUM, 'PharmacyBenefitsAndAuthorizations_SR_HUM/PharmacyBenefitsAndAuthorization_CSS_HUM.css')}"/>
    <script type="text/javascript">
        var enterpriseID = "{!JSENCODE(objPolMem.Member__r.Enterprise_ID__c)}";
        var accountID = "{!objPolMem.Member__r.Id}";
        var attachmentKey = "{!JSENCODE(objPolMem.Policy_Member_External_ID__c)}"; 	
		    var policyId = "{!JSENCODE(objPolMem.Id)}";
		    var pharmacyMemberDetails ="{!objPolMem}";  
		    var bPharmacyMailOrderVisible ="{!bPharmacyMailOrderVisible}";
		    var bSwitchFunctionality ="{!bSwitchFunctionality}";        
                
    </script>
    
    <style>
        .h1, .h2, .h3, h1, h2, h3 
        {
            margin: 0px !IMPORTANT; 
        }
        .pbSubsection .form-group 
		{
			margin-bottom: 15px;
			position: absolute;
			margin-left: 60px;
			margin-top: 0.5%;
		}	 

		.KeywordStyling
		{
				margin-left:10% !IMPORTANT;
		}
		
		.slds-popover__body,
        .slds-popover__footer,
        .slds-popover__header {
          position: relative;
          padding: .5rem .75rem;
          word-wrap: break-word
        }

        .slds-popover {
         position: relative;
		 border-radius: .25rem;
		 width: 20rem;
		 min-height: 2rem;
		 z-index: 6000;
		 background-color: #fff;
		 display: inline-block;
		 box-shadow: 0 2px 3px 0 rgba(0, 0, 0, .16);
		 border: 1px solid #d9dbdd
		}

		.slds-popover--tooltip,
		.slds-popover_tooltip {
		 width: auto;
		 max-width: 20rem;
		 background: #16325c;
		 border: 0
		}
		
		.slds-popover--tooltip .slds-popover__body,
		.slds-popover_tooltip .slds-popover__body {
		 font-size: .75rem;
		 font-size: 90%;
		 color: #fff
		}

		.slds-fall-into-ground {
		 visibility: hidden;
		 opacity: 0;
		 transform: translate(0, 0);
		 transition: opacity .1s linear, visibility .1s linear, transform .1s linear;
		 will-change: transform;
		}
		
		.slds-nubbin--bottom-left:before,
		.slds-nubbin_bottom-left-corner:before,
		.slds-nubbin_bottom-left:before {
		 width: 1rem;
		 height: 1rem;
		 position: absolute;
		 transform: rotate(45deg);
		 content: '';
		 background-color: inherit;
		 bottom: -.5rem;
		 margin-left: -.5rem
		}

		.slds-nubbin--bottom-left:after,
		.slds-nubbin--bottom-left:before,
		.slds-nubbin_bottom-left-corner:after,
		.slds-nubbin_bottom-left-corner:before,
		.slds-nubbin_bottom-left:after,
		.slds-nubbin_bottom-left:before {
			left: 1.5rem;
			top: 100%;
			margin-top: -.5rem;
		}

		.slds-nubbin--bottom-left:after,
		.slds-nubbin_bottom-left-corner:after,
		.slds-nubbin_bottom-left:after {
			box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, .16);
			z-index: -1;
		}

		.slds-popover :last-child {
			margin-bottom: 0;
		}

		.lightningHelpTextCls{
			top: 0px !important;
		}
		
		lightning-primitive-icon{
			zoom: 1.3 !important;
		}

		lightning-formatted-url > a{
			outline: none !important;
		}
     }
    </style>
    <!--Added for logging-->
    <div id="mainContDiv" onmouseover="onmouseOverFunc();">
	<apex:outputPanel rendered="{!bSwitchFunctionality}">
		<div id="loggingStickyHeader" class="LoggingCompCSS" style="width:100%;">
	        <c:Logging_CMP_HUM DisplayMessage="false" Logging_Color="red" AttachmentKey="{!objPolMem.Policy_Member_External_ID__c}" AttachmentDesc="Policy Member External ID" Logged_Item_Color="blue" Screenshot_Area_Id="pageContent" RecordId="{!objPolMem.Id}" disableButton="{!bdisableButton}"/>
	      </div>
	</apex:outputPanel> 
	    <table class="width100">
	        <tr>
	            <div>
	                <td class="vAlignTop width80">
	                    <div id="pageContent" style="background:white;">
	                        <div style="padding-top:20px; margin-top:106px!important;"></div>
	                        <apex:pageBlock mode="maindetail" id="finPageBlock">
							<apex:outputPanel id="pbcoveo" rendered="{!bCoveoUser}">
								<div style="margin-left:10px !important;">
									<c:UnifiedSearch_CMP_HUM id="uniId" policyMemberId="{!objPolMem.Id}" PageNameToPass="Pharmacy Benefits and Authorizations"/>
								</div>
								</apex:outputPanel>
	                            <apex:form id="finForm">
	                                <div class="sectionheader">
	                                    <apex:sectionheader title="Pharmacy Benefits and Authorizations" subtitle="{!objPolMem.Name}" />
	                                	
	                                </div>  
	                                <apex:pageBlockSection columns="1" id="thePageBlockSectionPharmacyAuth" title="Pharmacy Authorizations">
	                                     <c:PharmacyBenefits_CMP_HUM id="pharmacybenefitsandAuth"/>   
										<script>
											twistSection(document.getElementById('{!$Component.thePageBlockSectionPharmacyAuth}').getElementsByTagName('img')[0]);
										</script>
	                                </apex:pageBlockSection>

                                <apex:pageBlockSection columns="1" title="Pharmacy Mail Order Over-the-Counter(OTC) Benefit Snapshot" id="thePageBlockEsctionPharmacyMail">
										<apex:outputPanel id="lightningMailOrder">
											<apex:includeLightning />
												<div id="LightningMailOverDivId" style="font-size: 100%;"></div>
												<script> 
												$Lightning.use(
													"c:PharmacyBenefit_APP_HUM",
														function () {
															$Lightning.createComponent(
																"c:pharmacyBenefitsHum",
																{"accountId": accountID, "pharmacyMemberDetails": pharmacyMemberDetails},
																"LightningMailOverDivId"
															);
														}
												);
												</script>
										</apex:outputPanel>
									</apex:pageBlockSection> 
	                            </apex:form> 
	                        </apex:pageBlock>
	                    </div>
	                </td>
	            </div>
	        </tr>
	    </table>   
    	<apex:outputPanel id="stdMap">
            <input type="hidden" id="StandardMapValuesForLogging" value="" />
        </apex:outputPanel>
     </div>
     <script>    		
		prepareStandardFieldMap();				
		initialButtonStatus();				
		jQuery("[id$='benefittype_logging']").hide();
		jQuery("[id$='benefittype']").show();
        jQuery("[id$='benefittyperxnova']").show();
		sforce.console.setTabTitle('Pharmacy Benefits and Authorizations');
     </script>
</apex:page>