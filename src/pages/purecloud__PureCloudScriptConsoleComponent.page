<apex:page >
    <apex:includeScript value="/support/console/34.0/integration.js" />
    <style type="text/css">
        iframe {
            width: 100%;
            height: 100%;
            margin: 0px 0px 0px -10px;
            padding: 0;
            position: absolute;
            border: 0;
        }
    </style>

    <script type="text/javascript">

        function pageLoad() {
            sforce.console.fireEvent('inin.salesforce.constants.consoleevent.getscripterinfo');
        }

        function openScript(data) {
            if (data.message) {
                var parsedData = JSON.parse(data.message);
                var iframe = document.getElementById('script');

                if (iframe && iframe.src != parsedData.url) {
                    populateIframe(parsedData.url, parsedData.height, parsedData.width);
                }

                if (parsedData.forceFocus) {
                    sforce.console.setCustomConsoleComponentVisible(true);
                }
            }
        }

        function populateIframe(url, height, width) {
            var iframe = document.getElementById('script');
            iframe.src = url;
            iframe.style.display = "";

            var height = (height + 26) * 1.05;
            var width = width;
            sforce.console.setCustomConsoleComponentHeight(height);
            sforce.console.setCustomConsoleComponentWidth(width);
        }

        function focusComponent(data) {
            sforce.console.setCustomConsoleComponentVisible(true);
        }

        window.addEventListener('load', pageLoad);
        sforce.console.addEventListener('inin.salesforce.constants.consoleevent.pc.OPEN_SCRIPT', openScript);
        sforce.console.addEventListener('inin.salesforce.constants.consoleevent.pc.FOCUS_COMPONENT', focusComponent);
    </script>
    <iframe id="script" style="display:none" />
</apex:page>