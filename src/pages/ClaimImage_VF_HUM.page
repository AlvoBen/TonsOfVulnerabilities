<!--
Page Name        : ClaimImage_VF_HUM
Version          : 1.0 
Created Date     : 12/15/2015
Function         : This Page is used to display the claim Image.
Modification Log :
*    Developer               Code Review                     Date                 Description
* ------------------------------------------------------------------------------------------------------------------------------                
*   Harika Devi Kalidindi            25398                      02/29/2016          Original Version
*   Harika Devi Kalidindi            27503                      05/14/2016          Defect#225410.0001 added error messages that is to be displayed when there is no claim image associated to selected ClaimNumber
*   Prasanthi Kandula                2311792                    03/30/2018          REQ - 301521 Updated logic to handle mutliple claims images recevied from service
*   Prasanthi Kandula                216296                     04/18/2018          REQ - 301521 Updated logic to display ECN/DCN number based on Claim URL received
*   Shivam Anand                                                06/01/2018          REQ - 362029 Defect #360879.0001 - scroll bar issue for multiple claim image page
*   Prasanthi Kandula                                           02/01/2021          US-1669846 SonarQube critical security fixes  
*   Vivek														07/09/2022		    Updated the JS query to new Datatables to version to 1.12.1 
* Tharun Madishetti                                             07/14/2023      US-4647138: T1PRJ0891742 - VIT19761200 - Data Table Upgrade - Authorizations, Benefits, & Claims (Group 1)
 ------------------------------------------------------------------------------------------------------------------------------      
-->
<apex:page controller="ClaimImage_C_HUM" sidebar="false" showheader="true" id="pgid" tabStyle="Account" >

    <apex:includeScript value="{!URLFOR($Resource.CRM_JQUERY, 'jquery.min.js')}" />
    <apex:includescript value="{!URLFOR($Resource.CRM_DataTables_1_13_4, 'datatables.min.js')}"/>
    <link rel="stylesheet" text="text/css" href="{!URLFOR($Resource.CRM_DataTables_1_13_4, 'datatables.min.css')}" />
    <link rel="stylesheet" text="text/css" href="{!URLFOR($Resource.CRM_PLATFORM_TOOLKIT, 'datatables_HUM.min.css')}" />
    <link rel="stylesheet" text="text/css" href="{!URLFOR($Resource.CRM_PLATFORM_TOOLKIT, '/CSS/HoverOver.css')}" />
    <apex:includeScript value="/support/console/36.0/integration.js" />
    <apex:includescript value="{!URLFOR($Resource.CLAIMSIMAGE_SR_HUM,'/ClaimsImage_JS_HUM.js')}" id="claimImageJS"/>
    <apex:stylesheet value="{!URLFOR($Resource.CLAIMSIMAGE_SR_HUM,'/ClaimsImage_CSS_HUM.css')}" id="claimSummaryCSS"/> 
    
    <script>
      var claimNumber = '{!JSENCODE($CurrentPage.parameters.ClaimNumber)}';
    </script>
    
    <apex:form style="font-size:11px;" id="apexform">
        <apex:actionFunction name="init" action="{!initiateRequest}" reRender="oPanelImage,oPanelSecHeader" oncomplete="loadImageData('{!lstImagingDTO.size}','{!JSENCODE(stargetURL)}');"  />  
    
        <apex:outputPanel id="oPanelSecHeader">
            <table class="pageHeader" style="white-space:nowrap;">
                <tr>
                    <td>               
                        <apex:sectionHeader id="idsummaryheader" title="Claim Image" subtitle="{!sClaimNumber}" rendered="{!AND(NOT(ISBLANK(lstImagingDTO)),lstImagingDTO.size>1)}" />
                    </td>
                </tr>
            </table> 
            <apex:pageMessages id="pmServiceError" rendered="{!bShowServiceError}" />
        </apex:outputPanel>  
        
        <apex:outputPanel id="oPanelImage">
            <apex:outputPanel id="opDataTable" rendered="{!AND(NOT(ISBLANK(lstImagingDTO)),lstImagingDTO.size>1)}" >  
            <div class="col-xs-12" style="font-size:12px">
                <apex:pageMessage summary="{!$Label.MULTIPLEIMAGESINFO_CLAIMS_HUM}" severity="info" strength="3" id="pmInfomsg"/>
            </div>
            <div class="col-xs-12" style="font-size:12px" >
                 <div class="navbar navbar-default">
                         <div class=" col-md-2 navbar-header" style="width:10%;padding-right:0px;" >
                             <span class="navbar-brand panel-title" style="margin-top:6px;display:block;">Filter By</span>
                         </div>      
                         <div class="col-md-10 collapse nav navbar-collapse" style="margin-left:-3%;" id="bs-example-navbar-collapse-2">
                             <form class="navbar-form navbar-left" role="search1" id="ddFilters1">
                                 <input type="text" style="margin:8px 2px;" class="form-control" placeholder="Keyword" id="keyword" />
                             </form>
                         </div>
                    </div>
                 </div>  
                 <div  style = "font-size:12px;">
                     <br/> 
                     <div class="col-xs-12 ">
                       <div class="table-responsive" id="tableId"> 
                         <table id="example" class="table table-striped table-bordered  table-hover responsive nowrap enable_logging" cellspacing="0" style = "width: 100%; font-size : 12px">
                        <thead>
                            <tr>
                                <th title = "Electronic Control Number / Document Control Number">ECN/DCN</th>
                                <th title = "Receipt Date">Receipt</th>
                                <th title = "Servicing Provider/Facility Name">Servicing Prov Name</th>
                                <th title = "Rendering Provider ID">Servicing Prov ID</th>
                                <th title = "Billing Provider Name">Billing Prov Name</th>
                                <th title = "Billing Provider ID">Billing Prov ID</th>
                                <th title = "Billed Charge Amount">Billed Amt</th>
                                <th title = "Repriced">Repriced</th>
                                <th title = "Frequency Code">Frequency</th>
                            </tr>
                        </thead>
                        <tbody>
                            <apex:repeat value="{!lstImagingDTO}" var="claimImage" id="dataTableBodyId">
                                <tr>
                                    <td>
                                      <a id="ecnNumber" value="{!claimImage.sECNOrDCN}" href="javascript:OpenImageWindow('{!JSENCODE(claimImage.sClaimURL)}');">{!claimImage.sECNOrDCN}</a>
                                    </td>
                                    <td>{!claimImage.Receipt_Date}</td>
                                    <td>{!claimImage.sRendering_Provider_Last_Facility_Name}</td>
                                    <td>{!claimImage.sRendering_Provider_Id}</td>
                                    <td>{!claimImage.sBilling_Provider_Last_Facility_Name}</td>
                                    <td>{!claimImage.sBilling_provider_id}</td>
                                    <td>{!claimImage.dTotal_Billed_Charges}</td>
                                    <td>{!claimImage.bRepriced}</td>
                                    <td>{!claimImage.sClaim_Frequency_Code}</td>  
                                </tr>
                            </apex:repeat>
                        </tbody>
                    </table> 
                   </div>
                  </div>
                </div>
           </apex:outputPanel>
        </apex:outputPanel>
    </apex:form>
</apex:page>