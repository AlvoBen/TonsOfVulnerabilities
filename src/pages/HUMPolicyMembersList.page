<!--
Page Name        : HUMPolicyMembersList
Version          : 1.1
Created On       : 10/30/2014
Function         : VF page to display dependent Policy Member as related list on Policy Member detail page

Modification Log: 
 * Developer Name           Code Review                 Date                         Description
 *------------------------------------------------------------------------------------------------------------------------------
 * Vishal Verma             18875                       10/30/2014                     Original Version
 * Vishal Verma                                         11/02/2014                     Added static resource to open Member Id and Member record in console
 * Gargey Sharma            34890                       08/08/2016                     Added Value attribute to make it compatible for implementing continuation
 * Prudhvi Pamarthi         165023                      01/19/2018                     REQ - 328929 Fix for HUMExceptionHelper: DML 
 * Rakesh Patni             243679                      06/20/2018                    Introduced next and previous methods to make the pagination to only rerender the page instead of page load.
 * Rakesh Patni             251961                   07/11/2018                 Defect 369430.0001 fix.
 * Rakesh Patni               260681                 07/24/2018                 Defect fix for PPV issue- Case history headers getting logged
 * Ajay Chakradhar                                      06/22/2021                     REQ - 1755455 - Performance Improvement
 ****************************************************************************************************************************
 -->
<apex:page StandardController="Policy_Member__c"  extensions="HUMPolicyMembersListController">
  <!--<apex:includeScript value="/support/console/30.0/integration.js" />-->
  <apex:includeScript value="{!URLFOR($Resource.HUMPolicyMembersList,'/HUMPolicyMembersList.js')}"/>
  <apex:pageBlock >
    <apex:form >
      <!-- For Constructor Related exception -->
      <c:HUMConstructorExceptionComponent errorLogs="{!listErrorLogs}" />
      <apex:outputPanel rendered="{!!bNoRecordsFound}" id="pbSectPolMem">
        <apex:pageBlockTable value="{!DependentPolicyMembers}" var="polMem" id="polMemlistTable" style="margin-bottom:2px;">
          <apex:column headerValue="{!$Label.HUMMember_Id}">
            <apex:outputLink value="" target="_blank" onclick="openTab('{!JSENCODE(polMem.Id)}','{!JSENCODE(polMem.Name)}'); return false">{!polMem.Name}</apex:outputLink>
          </apex:column>
          <apex:column headerValue="{!$Label.HUMCOBMemberLabel}">
            <apex:outputLink value="" target="_blank" onclick="openTab('{!JSENCODE(polMem.Member__c)}','{!JSENCODE(polMem.Member__r.Name)}'); return false">{!polMem.Member__r.Name}</apex:outputLink>
          </apex:column>
          <apex:column value="{!polMem.Member__r.Birthdate__c}"/>
          <apex:column value="{!polMem.Member__r.Gender__c}"/>
          <apex:column value="{!polMem.Relationship__c}"/>
          <apex:column value="{!polMem.Effective_Date__c}"/>
          <apex:column value="{!polMem.End_Date__c}"/>
          <apex:column value="{!polMem.Status__c}"/>
          <apex:column value="{!polMem.EHB_Term_Date__c}"/>
        </apex:pageBlockTable>
        <apex:outputPanel id="showLinks" >
          <apex:commandLink id="prevLink" value="{!$Label.HUMPrevious}" action="{!previous}" oncomplete="loggingPatch();makeLinksDisabled();" rerender="pbSectPolMem" rendered="{!lstDependentPolicyMember.hasprevious}"  style="padding-right:20px"/>
          <apex:commandLink id="nextLink" value="{!$Label.HUMNext}" action="{!next}" oncomplete="loggingPatch();makeLinksDisabled();" rerender="pbSectPolMem" rendered="{!lstDependentPolicyMember.hasNext}" />
          <apex:outputText id="prevText" html-log_this="false" value="{!$Label.HUMPrevious}"  rendered="{!lstDependentPolicyMember.hasprevious}"  style="padding-right:20px"/>
          <apex:outputText id="nextText" html-log_this="false" value="{!$Label.HUMNext}"  rendered="{!lstDependentPolicyMember.hasNext}" />
        </apex:outputPanel>
      </apex:outputPanel>
      <apex:outputPanel rendered="{!bNoRecordsFound}">
        <apex:outputLabel html-log_this="false" value="{!$Label.HUMNo_records_to_display}" />
      </apex:outputPanel>
    </apex:form>
  </apex:pageBlock>
</apex:page>