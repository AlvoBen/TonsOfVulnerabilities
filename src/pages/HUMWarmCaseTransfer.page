<!-- *****************************************************************************************
Page Name          : HUMWarmCaseTransfer
Version            : 1.0
Function           : Page for Warm Case Transfer in Console tab
Created Date       : 22/09/2016

Modification Log:
*   Developer             Code Review       Date                Description
* ------------------------------------------------------------------------------------------------------------------------------                
*   Shikhar Mehta          40792           22/09/2016          Original Version
*   Shikhar Mehta                          05/10/2016          Req - 282376
*   Shikhar Mehta                          26/10/2016          Defect # 245667
*   Samridh Manucha        45135           28/10/2016          Defect Fix - 245675.0001
*   Vamsi Kondragunta      47603           11/11/2016          Defect fix for #244725.0001
*   Mithra Bharadwaj                                           US#2089572 SonarQube Changes
---------------------------------------------------------------------------------------------------------------------------------
-->
<apex:page Controller="HUMWarmCaseTransfer" sidebar="true" showHeader="true" title="Title" id="pageCaseWarm">
  	<apex:includeScript value="/support/console/26.0/integration.js"/>
    <apex:includeScript value="{!URLFOR($Resource.WARMCASEDTRANSFER_SR_HUM, 'WarmCaseTransfer.js')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.WARMCASEDTRANSFER_SR_HUM, 'WarmCaseTransfer.css')}"/>
    
    <!--For the accept button to open the case in a new tab, we are passing the value which we get from remote function
        Which is moved to the static resource, so this function needs to be present be here and cannot be moved to static resource -->   
    <script>
    	function acceptCase(val, usernameval, casenumber){
            opentabWarmCaseTransfer(val, usernameval, casenumber, '{!$RemoteAction.HUMWarmCaseTransfer.updateCaseRecord}');
        }
    </script>
    
    <apex:form id="Main_form">     
    <apex:pageBlock id="Main_Block">  
        <center>        
        <apex:commandButton value="Refresh" id="view_this_object2" action="{!getCases}" reRender="CaseList">
		</apex:commandButton>                
        </center>
        <apex:actionFunction name="refreshCaseListPanel" action="{!getCases}" reRender="MyCaseListPanel" />
        <a class="errMsgWarmCaseTransfer"></a>
        <apex:outputPanel id="MyCaseListPanel" >
            <div class="divWarmCaseTransferTable">  
                <apex:pageBlockTable value="{!caseList}" var="b"  id="CaseList" >
                    <apex:column >
                        <apex:facet name="header">{!$Label.HUM_Case}</apex:facet>               
                        <apex:outputLink value="/{!b.id}" id="targetid">{!b.CaseNumber}</apex:outputLink>
                    </apex:column> 
                    <apex:column ><apex:facet name="header">{!$Label.HUM_Shared_To}</apex:facet><apex:outputText value="{!b.User__r.Name}"/></apex:column>
                    <apex:column ><apex:facet name="header">{!$Label.HUM_Shared_From}</apex:facet><apex:outputText value="{!b.Transferred_From__r.Name}"/></apex:column>            
                    <apex:column >
                        <apex:facet name="header">{!$Label.HUM_Action}</apex:facet>
                        <apex:commandButton value="Accept" onclick="acceptCase('{!b.id}','{!JSENCODE(b.User__r.Name)}','{!b.CaseNumber}');return false;" id="view_this_object" />
                        <apex:commandButton action="{!Reject}" value="Reject" id="view_this_object1" reRender="MyCaseListPanel"/> 
                        <apex:commandButton action="{!Cancel}" value="Cancel" id="view_this_object2" rendered="{!if(b.Transferred_From__c=$User.Id,true,false)}" reRender="MyCaseListPanel"/>          
                    </apex:column>            
                </apex:pageBlockTable>
            </div>
        </apex:outputPanel>
    </apex:pageBlock> 
 </apex:form>
</apex:page>