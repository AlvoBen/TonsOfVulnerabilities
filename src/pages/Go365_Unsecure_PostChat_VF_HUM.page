<!--
Page Name        : Go365_Unsecure_PostChat_VF_HUM
Version          : 1.0 
Created Date     : October 25 2016
Function         : Custom window for Post Chat form on Live agent for Go365 site
Modification Log :
*   Modification ID     Developer                     Code Review         Date                 Description
* ------------------------------------------------------------------------------------------------------------------------------                
*           1.0         Joel George                                     12/16/2019            Original Version
*           2.0         Joel George                                     05/04/2020            User Story - 1052030  + DF-625 
*   	    3.0         Akshay Pai                               	02/18/2021            REQ - 1910316 - SonarQube Scan issue fix
  ------------------------------------------------------------------------------------------------------------------------------>
<apex:page showheader="false" controller="Go365UnsecureChat_C_HUM" standardStyleSheets="false" action="{!postchatinit}">

<html class="no-js" lang="en">
    
    <apex:includeScript value="{!$Resource.HUMJquery}" />
     <apex:includeScript value="{!URLFOR($Resource.HUMUnsecuredPostChat_SR_HUM,'/HUMUnsecuredPostChat_SR_HUM/JS/HUMUnsecuredPostChat.js')}"/> 
     
    <script type="text/javascript">
    var src = "{!JSENCODE(sWebChatVarMap['CodeMetricsJS'].value__c)}";
        if (window.location.host.substring(0, 2) == "qa") 
        {
            src = "{!JSENCODE(sWebChatVarMap['CodeMetricsQaJS'].value__c)}";
        } 
        else if (window.location.host.substring(0, 4) == "test") 
        {
            src = "{!JSENCODE(sWebChatVarMap['CodeMetricsTestJS'].value__c)}";
        }
        document.write('<script src="' + src + '" type="text/javascript"><' + '/script>');
        
        var sChatDetails2 = '{!JSENCODE($CurrentPage.parameters.chatDetails)}';
        var sIntName = '';
        var sNameMethod = '{!$RemoteAction.Go365UnsecureChat_C_HUM.findInteractionName}';
        var logInteractionDetails = '';
        var sInteractionName ='{!JSENCODE(sIntName)}';  
       
        var pageParams = '{!JSENCODE(pageParams)}';
        
         function saveChatConfirmation()
        {
            var webChatDownloadConfirmResponse = confirm('{!$Label.Web_Chat_Download_Confirmation_Message_Unsecure_go365}');      
            if (webChatDownloadConfirmResponse)
            {       
                callGoToHUMSaveChatTranscriptPageMethod();
            }
            return false;
        } 


    </script>   

    <head>
     <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Post Chat</title>

            <title>Chat</title>
            <meta charset="utf-8" />
            <meta http-equiv="x-ua-compatible" content="ie=edge" />
            <meta name="description" content="" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <link rel="stylesheet" text="text/css" href="{!URLFOR($Resource.HumGo365LiveAgentCSS,'/content/dist/css/go365.css')}" />
            <link rel="stylesheet" text="text/css" href="{!URLFOR($Resource.HumGo365SampleCSS,'/c2csample/custom.css')}" />

        </head>
            <body class="x5">
                        <!-- Start Tealium analytics v1_3 - do not remove or change -->
            <script type="text/javascript">
                var utag_data = {};
                    if (typeof HumAnalytics == "undefined"){
                        var HumAnalytics = window.HumAnalytics = {};}
                HumAnalytics.appid = [];
                HumAnalytics.autorenewflag = [];
                HumAnalytics.copayexcflag = [];
                HumAnalytics.prodcat = [];
                HumAnalytics.prodid = [];      
                HumAnalytics.prodname = [];
                HumAnalytics.prodpkgqty = [];      
                HumAnalytics.prodqty = [];
                HumAnalytics.prodsav = [];   
                HumAnalytics.prodtranstype = [];          
                HumAnalytics.prodtype = []; 
                HumAnalytics.produp = [];
            </script>

            <!-- Loading script asynchronously -->
            <script type="text/javascript">
                (function(a,b,c,d){
                a='{!JSENCODE(sWebChatVarMap['Go365Unsecure_Tealium'].value__c)}';
                b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
                a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
                })();
            </script>
            <!-- End Tealium analytics - do not remove or change -->
                <main>
                    <div class="chat-page-heading">
                    <h1>Go365 chat</h1>
                    </div>
                    <div class="chat-wrapper">
                        <div class="container">
                            <div class="row">

                            <div class="text-align-left">
                            
                                <apex:outputPanel rendered="{!IF($CurrentPage.parameters.transcript!='',true,false)}">
                                    <h2>Thank you!</h2>
                                        <p class="go-subheading">
                                        {!$Label.Go365_Unsecure_PostChat_Thankyou}
                                    </p>
                                </apex:outputPanel>
                                
                                <apex:outputPanel rendered="{!IF($CurrentPage.parameters.transcript=='',true,false)}">
                                    <h1>Chat is not available</h1>

                                    <p class="x0" style="text-align: left!IMPORTANT;">
                                    We're sorry; chat agents are not available to respond to your questions at this time. Do you have questions or are you encountering issues when attempting to sign in? No worries - we are here to help! Check out these  <a target="_blank" href="https://community.go365.com/community/support/blog/2019/12/04/login-to-your-go365-account-today" rel="noopener noreferrer">helpful resources</a> within our Go365 Community (available 24/7)!
                                    </p>
                                </apex:outputPanel>



                                <apex:outputPanel rendered="{!IF($CurrentPage.parameters.transcript!='',true,false)}">
                                    <apex:outputLink styleClass="go-primary-button marginStyle" onclick="return saveChatConfirmation();">
                                        <i class="go-icon-tech-save go-icon-small x1-right"></i>
                                        <span>Save chat</span>
                                    </apex:outputLink>     
                                </apex:outputPanel>
                                
                                <p class="go-subheading">
                                    <apex:outputPanel rendered="{!IF($CurrentPage.parameters.transcript!='',true,false)}">
                                    {!$Label.Go365_Unsecure_Survey_Msg}             
                                    </apex:outputPanel>
                                </p>


                                <apex:outputPanel rendered="{!IF($CurrentPage.parameters.transcript!='',true,false)}">
                                    <apex:outputPanel >
                                        <button class="go-strong-button" onclick="openSurvey('{!JSENCODE(sWebChatVarMap['Go365UnsecureLink'].value__c)}');return false;" type="submit">
                                            <span>Take survey</span>
                                        </button>
                                    </apex:outputPanel>

                                    <a href="javascript:window.close();" class="go-primary-button"><span>No, thanks</span></a>
                                </apex:outputPanel>

                                <apex:outputPanel rendered="{!IF($CurrentPage.parameters.transcript=='',true,false)}">
                                    <button class="go-strong-button" onclick="javascript:window.close();" type="submit">
                                        <span>Close Window</span>
                                    </button>
                                </apex:outputPanel>

                            </div>

                            </div>
                        </div>
                    </div>
                </main>
            </body>

        <style>
           .marginStyle{
           margin-bottom:20px!important;
           }
           .go-subheading {
    
    margin-bottom: 35px!important;
}
        </style></html>
       <apex:form >
        <apex:actionFunction name="callGoToHUMSaveChatTranscriptPageMethod" action="{!goToHUMSaveChatTranscriptPage}" /> 
      </apex:form> 

</apex:page>