<apex:page action="{!createCS}" controller="DpaasWebServiceClient" tabStyle="Account">
    <script>
        function confirmCancel(){
            var foundCancel = confirm("Are you sure you want to cancel?");
            if(foundCancel){
                return true;
            }
            return false;
        }
        
        function confirmAuthentication(){
            var confirmAuthenticate = confirm("Are you sure you want to continue with out authenticate your session If YES Click OK other wise Click link Authentication");
            if(confirmAuthenticate){
                return true;
            }
            return false;
        }
    </script>

    <apex:sectionHeader title="DPaaS Wizard: Encryption & Tokenization" subtitle="Step 1 of 2"/>
    <apex:form >
    <apex:pageBlock title="Field Information" mode="edit">
        <apex:repeat value="{!errors}" var="err" rendered="{!!ISBLANK(errors)}">
        <center><div style = 'color:red'> <b>
            <apex:outputLabel >{!err}</apex:outputLabel></b></div></center>
        </apex:repeat>
        <apex:pageBlockButtons location="bottom">
            <apex:commandButton action="{!tokenizationStep2}" value="Next"/>
            <apex:commandButton action="{!cancel}" value="Cancel" onclick="return confirmCancel()"/>
        </apex:pageBlockButtons>
       
       <apex:pageBlockSection ></apex:pageBlockSection>
       <apex:pageBlock id="pageBlock">
       <apex:repeat value="{!dpaasFieldVoList}" var="dpaas" rendered="{!!ISBLANK(dpaasFieldVoList)}">
           <apex:pageBlockSection >
               <apex:outputLabel value="Application Name*" for="applicationName"/>
               <apex:inputText id="applicationName" value="{!dpaas.applicationName}"/>
               <apex:outputLabel value="Entity Name*" for="entityName"/>
               <apex:inputText id="entityName" value="{!dpaas.entityName}"/>
               <apex:outputLabel value="Field Name*" for="fieldName"/>
               <apex:inputText id="fieldName" value="{!dpaas.fieldName}"/>
               <apex:outputLabel value="Cleartext Value*" for="clearTextValue"/>
               <apex:inputText id="clearTextValue" value="{!dpaas.clearTextValue}"/>
           </apex:pageBlockSection>
           <apex:pageBlock >
               <apex:pageBlockSection ></apex:pageBlockSection>
           </apex:pageBlock>
       </apex:repeat>
       <apex:commandLink action="{!loadBlocks}" value="Add Additional Field" rerender="pageBlock" status="myStatus"/>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
       <apex:commandLink action="{!removeBlocks}" value="Remove Field" rerender="pageBlock" status="myStatus"/>

          <apex:actionstatus startText="Loading Content..." id="myStatus"/>
          <script type="text/javascript">
              window.setTimeout(loadDocuments, 100);
          </script>     
       </apex:pageBlock>
       </apex:pageBlock>
       <apex:actionSupport event="onmouseover" action="{!doLogin}" reRender="refreshId" status="counterStatus">
              <apex:param name="sessionId" assignTo="{!sid}" value="{!$Api.Session_ID}"/>
              <apex:param name="serverURL" assignTo="{!sURL}" value="{!$Api.Partner_Server_URL_210}"/>
        </apex:actionSupport>
    </apex:form>
</apex:page>