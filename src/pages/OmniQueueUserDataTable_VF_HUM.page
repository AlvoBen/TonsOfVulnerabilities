<!--
Page Name        : OmniQueueUserDataTable_VF_HUM
Version          : 1.0
Created Date     : OCT 25 2017
Function         : This page is used to display users of Omni Queues in Omni Queues detail page.
*********************************************************************************************************************************************************************************
Modification Log:

* Modification Id           Developer Name             Review Number               Date                       Description
*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
* 1.0                       Syed Mubarak T              141054                    10/25/2017                      Original Version
* 1.1                       Vivek												  07/09/2022		          Updated the JS query to new Datatables to version to 1.12.1
* 1.2                       Pinky Vijur                                           08/05/2023                  User Story 4647289: T1PRJ0891742 - VIT19761200 - Data Table Upgrade - Business Configuration & Omni Channel (Group 2)
*---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------* -->

<apex:page StandardController="OmniQueue__c" extensions="OmniQueueUserDataTable_X_HUM">
 
     <apex:includeScript value="/support/console/36.0/integration.js" />
    <apex:includeScript value="{!URLFOR($Resource.CRM_JQUERY, 'jquery.min.js')}" />
  <apex:includescript value="{!URLFOR($Resource.CRM_DataTables_1_13_4, 'datatables.min.js')}" /><!--DT Upgrade-->
    <link rel="stylesheet" type="text/css" href="{!URLFOR($Resource.CRM_DataTables_1_13_4, 'datatables.min.css')}"/><!--DT Upgrade-->
    <apex:stylesheet value="{!URLFOR($Resource.CRM_PLATFORM_TOOLKIT, 'datatables_HUM.min.css')}" />
     <script>
//dont enable P9 Critical Fix    var jQuery$ = jQuery.noConflict();
    jQuery(document).ready(function () {
            getUsersData(); 
    });
     
     function drawTable() {
     jQuery('#omniQueueUsersDataTable').DataTable({  
               "pagingType": "simple_numbers",
               "scrollCollapse": true,
               "dom": '<"row"<"col-sm-12"tr><"col-sm-8"l><"col-sm-4"<"pull-left"p> \
                    <"btn-group pull-left"<"toolbar">>>>rt<"row"<"col-sm-12"tr><"col-sm-8"i><"col-sm-4"<"pull-left"p>>>',
                // Set the default number of records to display in the table
                "pageLength": 10,
                "lengthMenu": [10, 25, 50, 75, 100]
             });    
    } 
     </script>
     
     <apex:outputPanel id="omniQueueUsersContainer">
            <table id="omniQueueUsersDataTable" class="table table-striped table-bordered  dataTable no-footer width100">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                                              
                        <apex:repeat value="{!omniUsers}" var="userObj">
                            <tr>
                                <td>
                                  <apex:outputLink target="_parent" value="/{!userObj.Id}">{!userObj.FirstName} {!userObj.LastName}</apex:outputLink>
                                </td>
                                <td>
                                  <apex:outputText value="{!userObj.Email}"/> 
                                </td>
                            </tr>
                         </apex:repeat>
                        </tbody>
                </table>
        </apex:outputPanel>
        <apex:form id="formId">
           <apex:actionFunction name="getUsersData" action="{!fetchOmniUsers}" rerender="omniQueueUsersContainer" oncomplete="drawTable();"> </apex:actionFunction>
        </apex:form>
 
</apex:page>