<!-- *****************************************************************************************
Page Name          : HUMVerifyDemographics
Version            : 1.0
Function           : Page to display Verify Demographics section in Account Page
Created On         : 06/04/2014

Modification Log:
*   Developer                   Code Review     Date               Description
* ------------------------------------------------------------------------------------------------------------------------------                
*   Kritika Popat               17076           06/04/2014          Original Version
*   Asha Deepika Koyyana        18218           09/08/2014          As a part of defect fix #153891,modified the static resource
                                                                    to display the page as a subtab instead of popup
*  Asha Deepika Koyyana         18355           10/06/2014          As per requirement (#2411) added error message tag.
*  Asha Deepika Koyyana         19104           11/05/2014          As per requirement (#2411) added error message.   
* Firoja Begam              1946387              02/24/2021           T1PRJ0002736/PR00094232 - 2021 - MF6 - Security - Checkmarx High Defects in Release_2021_02_21 - SF - TECH - Type: "inputText Ignoring FLS" - Remediation                                                          
* Vardhman Jain                                  02/29/2024           US5303780 - Classic VIT Remediation COB, Policy Member, Verify and update Demographics ; VIT37070839, VIT37935980,   VIT37935986
****************************************************************************************** -->

<apex:page id="pageId" standardController="Account" extensions="HUMVerifyFamilyServiceController" action="{!getLastVerifyDates}" sidebar="false"  showHeader="true" >
    <apex:includeScript value="/support/console/30.0/integration.js" />
    <apex:includeScript value="{!URLFOR($Resource.HUMVerifyFamily, 'HUMVerifyFamily/HumVerifyFamily.js')}" />

    <script language="javascript" type="text/javascript">
       var newwindow;
       var policyPage ='{!$Page.HUMPolicyName}';
       var urlParameters='?';
       var accountId = '{!JSENCODE(sAccId)}'; //assign value of accountId directly from Controller not using inputHidden
    </script>

    <apex:form id="formId">
       <apex:pagemessages id="error"> </apex:pagemessages> 
       <apex:outputPanel rendered="{!bRender }">
            <apex:pageBlock id="pageBlockId" mode="edit" title="">
              <!--Removed inputHIdden to fix Checkmarx inputText ignoring FLS-->
                <apex:pageblockButtons location="top">
                    <apex:commandButton value="Verify" action="{!verifyDemographics}" reRender="pageBlockTableId,error1" />
                    <apex:commandButton value="Verify Family" onclick="redirectoPolicyPage(); return false;" />
                </apex:pageblockButtons>
                <apex:pagemessages id="error1"> </apex:pagemessages>
                <apex:pageBlockSection columns="1" id="pageBlockTableId">
                    <apex:pageBlockTable value="{!lstVerifyDemoGraphics }" var="item">
                        <apex:column value="{!item.sLastVerifiedBy}" headerValue="Last Verified By"/>
                        <apex:column value="{!item.sLastVerifiedOn}" headerValue="Last Verified On"/>
                        <apex:column value="{!item.iDaysSinceLastVerified}" headerValue="Days Since Last Verified"  style="{!IF
                        (item.iDaysSinceLastVerified>90,'color:orange','color:black')}" id="columnId" />               
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:pageBlock>
       </apex:outputPanel> 
    </apex:form>
</apex:page>