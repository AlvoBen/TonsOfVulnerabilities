<!--
/*****************************************************************************************************************************
Component Name   : pharmacyHpieCreditCardDetailsHum.html
Version          : 1.0
Function         : lwc to display credit card details

Modification Log:
* Developer Name           Code Review                 Date                         Description
*---------------------------------------------------------------------------------------------------------------------
* Jonathan Dickinson							       08/17/2023					User Story 4908778: T1PRJ0870026 - SF - Tech - C12 Mail Order Management - Pharmacy - Finance tab
*******************************************************************************************************************************************************************/
-->
<template>
    <lightning-card>
        <div class="slds-grid slds-grid_align-spread slds-wrap">
            <template lwc:if={loaded}>
                <template lwc:if={dataExist}>
                    <div class="slds-col slds-size_1-of-1">
                        <div class="slds-grid slds-grid_align-end">
                            <div class="slds-col">
                                <span>{numCards} item(s)</span>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_1-of-1">
                        <div class="slds-table--header-fixed_container">
                            <div class="slds-scrollable_y" style="height: 100%;">
                                <table
                                    class="slds-no-row-hover slds-table slds-table_bordered slds-table_cell-buffer slds-table--header-fixed">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <template for:each={creditCardInfoLayout} for:item="col">
                                                <th scope="col" key={col.label} style={col.style}
                                                    data-iconname={col.iconname} data-label={col.label}
                                                    data-id={col.mappingField} onmouseenter={handleMouseEnter}
                                                    onmouseleave={handleMouseLeave} onclick={onHandleSort}>
                                                    <div class="slds-p-top_x-small slds-truncate slds-cell-fixed"
                                                        title={col.label} style="width: 100%;">
                                                        {col.label}
                                                        <span>
                                                            <template lwc:if={col.mousehover}>
                                                                <lightning-icon
                                                                    class="slds-var-m-left_small remove-display-sort-icon"
                                                                    icon-name={col.mousehovericon} size="xx-small">
                                                                </lightning-icon>
                                                            </template>
                                                            <template lwc:else>
                                                                <template lwc:if={col.sorting}>
                                                                    <lightning-icon
                                                                        class="slds-var-m-left_small remove-display-sort-icon"
                                                                        icon-name={col.iconname} size="xx-small">
                                                                    </lightning-icon>
                                                                </template>
                                                            </template>
                                                        </span>
                                                    </div>
                                                </th>
                                            </template>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <template for:each={lstCreditCards} for:item="card">
                                            <tr class="slds-hint-parent" key={card.Id}>
                                                <td data-label="Card Type">
                                                    <div class="slds-wrap" title={card.cardType}>
                                                        {card.cardType}
                                                    </div>
                                                </td>
                                                <td data-label="Last4Digits">
                                                    <div class="slds-wrap" title={card.last4Digits}>
                                                        {card.last4Digits}
                                                    </div>
                                                </td>
                                                <td data-label="CardHolderName">
                                                    <div class="slds-wrap" title={card.cardHolderName}>
                                                        {card.cardHolderName}
                                                    </div>
                                                </td>
                                                <td data-label="ExpirationDate">
                                                    <div class="slds-wrap" title={card.expirationDate}>
                                                        {card.expirationDate}
                                                    </div>
                                                </td>
                                                <td data-label="AutoCharge">
                                                    <div class="slds-wrap" title={card.autoCharge}>
                                                        {card.autoCharge}
                                                    </div>
                                                </td>
                                                <td data-label="Status">
                                                    <div class="slds-wrap" title={card.status}>
                                                        {card.status}
                                                    </div>
                                                </td>
                                                <td data-label="SpendingAccount">
                                                    <div class="slds-wrap" title={card.spendingAccount}>
                                                        {card.spendingAccount}
                                                    </div>
                                                </td>
                                                <template lwc:if={card.IsEditIcon}>
                                                    <td data-label="SpendingAccount">
                                                        <div class="slds-wrap" title="Edit">
                                                            <lightning-button-icon alternative-text="Edit"
                                                                title="Edit" icon-name="utility:record_update"
                                                                class="icon-settings" onclick={handleRowAction}
                                                                data-cardkey={card.creditCardKey}>
                                                            </lightning-button-icon>
                                                        </div>
                                                    </td>
                                                </template>
                                                <td data-label="ExpirationDate">
                                                    <div class="slds-wrap">
                                                        <template lwc:if={card.IconURL}>
                                                            <img title={card.IconLabel} src={card.IconURL}
                                                                class="img-setting icon-settings" />
                                                        </template>
                                                        <template lwc:else></template>
                                                    </div>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </template>
                <template lwc:else>
                    <div class="slds-col slds-size_1-of-1">
                      <c-generic-scoped-notification-hum iconname="utility:info"
                          message={labels.nocardmsg}>
                      </c-generic-scoped-notification-hum>
                    </div>
                </template>
            </template>
            <template lwc:else>
                <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
            </template>
        </div>
    </lightning-card>
</template>