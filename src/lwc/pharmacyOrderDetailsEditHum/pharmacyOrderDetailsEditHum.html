<!--
LWC Name        : pharmacyOrderDetailsEditHum.html
Function        : LWC to display pharmacy order edit details.

Modification Log:
* Developer Name                  Date                         Description
*
* Abhishek Mangutkar              03/09/2022                   US - 3139633
* Nirmal Garg											03/14/2022										DF-4625 fix
****************************************************************************************************************************-->

<template>
    <div class="slds-p-around_medium">
        <lightning-layout multiple-rows="true">
            <lightning-layout-item size="12">
                <div class="slds-grid slds-gutters slds-p-around_small">
                    <div class="slds-col slds-size_3-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Shipping Method <lightning-icon icon-name="utility:rotate" size="xx-small"></lightning-icon></p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue slds-wrap">
                                    {orderDetailsResponse.ShippingMethod}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Payer</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue slds-wrap">{spayer}</p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_1-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Status</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderdetails.OrderStatusLiteral}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_1-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Carrier</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderDetailsResponse.Carrier}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Tracking Number</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12" class="slds-truncate_container_75">
                                <p class="slds-text-link slds-truncate "
                                   style=" font-size: 12px;cursor:pointer;" onclick={trackingNumberPopUp}
                                   title={orderDetailsResponse.ShippingTrackingNumber}>
                                    {orderDetailsResponse.ShippingTrackingNumber}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Cancel Reason</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderDetailsResponse.CancelReasonCode}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                </div>
            </lightning-layout-item>
            <lightning-layout-item size="12">
                <div class="slds-grid slds-gutters slds-p-around_small">
                    <div class="slds-col slds-size_3-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Shipping Address <lightning-icon icon-name="utility:rotate" size="xx-small"></lightning-icon></p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderDetailsResponse.ShippingAddress}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="slds-float_left" style=" font-size: 11px;">Current Order Queue</p>
                                <lightning-button-icon icon-name="utility:refresh" size="small"
                                                       alternative-text="Refresh" class="slds-var-p-left_small iconcolor"
                                                       title="Refresh" onclick={getOrderDetails}></lightning-button-icon>

                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderDetailsResponse.CurrentQueue}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <template if:true={checkCode}>
                        <div class="slds-col slds-size_1-of-12">
                            <lightning-layout multiple-rows="true">
                                <lightning-layout-item size="12">
                                    <p class="authlabel">Finance</p>
                                </lightning-layout-item>
                                <lightning-layout-item size="12">
                                    <p class="authvalue">
                                        {orderDetailsResponse.Finance}
                                    </p>
                                </lightning-layout-item>
                            </lightning-layout>
                        </div>
                    </template>
                    <div class="slds-col slds-size_2-of-12 ">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Creation</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderdetails.OrderCreationDate}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12 ">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Release <lightning-icon icon-name="utility:rotate" size="xx-small"></lightning-icon></p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <c-generic-date-selector dhelptext="" dkeyname="ReleaseDate" dminvalue={sMinDate}
                                                         onsenddatedata={handleDateChange} dvalue={orderReleaseDate} dmaxvalue={sMaxDate}>
                                </c-generic-date-selector>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12" class="slds-var-p-left_xx-large">
                                <p class="authlabel">Finished</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12" class="slds-var-p-left_xx-large">
                                <p class="authvalue">
                                    {orderDetailsResponse.OrderShipDate}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                </div>
            </lightning-layout-item>
        </lightning-layout>
    </div>
    <div class="slds-p-around_small">
        <div class="custom-box slds-box slds-p-around_medium" style="min-height:300px;">
            <lightning-layout-item size="12">
                <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Payment Method <lightning-icon icon-name="utility:rotate" size="xx-small"></lightning-icon></p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderDetailsResponse.CreditCard}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Source</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {orderdetails.OrderSource}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">CAP Type</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p class="authvalue">
                                    {capType}
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Order Total</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p>
                                    <lightning-formatted-number value={orderdetails.OrderTotalAmount}
                                                                format-style="currency" currency-code="USD"
                                                                maximum-fraction-digits="2" class="authvalue">
                                    </lightning-formatted-number>
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Order Copay</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p>
                                    <lightning-formatted-number value={orderdetails.OrderpayAmount}
                                                                format-style="currency" currency-code="USD"
                                                                maximum-fraction-digits="2" class="authvalue">
                                    </lightning-formatted-number>
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                    <div class="slds-col slds-size_2-of-12">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <p class="authlabel">Order Tax</p>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <p>
                                    <lightning-formatted-number value={orderdetails.OrderTaxAmount}
                                                                format-style="currency" currency-code="USD"
                                                                maximum-fraction-digits="2" class="authvalue">
                                    </lightning-formatted-number>
                                </p>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                </div>
            </lightning-layout-item>
            <lightning-layout-item size="12">
                <div class="slds-border_top slds-var-p-top_large"></div>
            </lightning-layout-item>
            <template if:true={displayOTCMessage}>
                <div class="counterOrderText">
                    <h4>{overTheCounterMsg}</h4>
                </div>
            </template>
            <div>
                <h3>
                    <span class="slds-page-header__title slds-truncate" title="Order Items">
                        Order
                        Items
                    </span>
                </h3>
            </div>
            <template if:true={orderparentnode}>
                <c-pharmacy-order-detail-items-hum onsplitorderclick={getSplitOrderDetails}
                                                   orderparentnode={orderparentnode} payer={spayer}
                                                   orderprescription={orderDetailPrescriptions} called-from-edit-order={calledFromEditOrder}
                                                   ondeletescriptkeyfromlist={handleDeleteScriptKey}>
                </c-pharmacy-order-detail-items-hum>
            </template>
        </div>
    </div>
    <!--Shipping Address Module-->
    <div>
        <div class="slds-grid slds-wrap slds-m-left_small slds-m-right_small slds-m-top_small">
            <div class="slds-col slds-size_5-of-12">
                <p style="font-weight: 600;">Shipping Address</p>
            </div>
            <div class="slds-col slds-size_7-of-12">
                <div class="slds-grid slds-wrap">
                    <div class="slds-col slds-size_4-of-12">
                        <p class="slds-float_right" style="font-weight: 600;">Payment Methods</p>
                    </div>
                    <div class="slds-col slds-size_4-of-12">
                        <p>
                            <lightning-button label="New Credit Card" title="New Credit Card" onclick={handleNewClick}
                                              class="slds-m-left_x-small slds-float_right"></lightning-button>
                        </p>
                    </div>
                    <div class="slds-col slds-size_4-of-12">
                        <p>
                            <lightning-button label="Edit Credit Card" title="Edit Credit Card" onclick={handleEditClick}
                                              class="slds-m-left_x-small slds-float_right"></lightning-button>
                        </p>
                    </div>
                </div>
            </div>
            <div class="slds-col slds-size_4-of-12 slds-m-top_small">
                <lightning-combobox name="progress" label="Shipping Method" value={selectedShippingMethod}
                                    placeholder="Shipping Method" options={shippingoptions} onchange={handleShippingChange}
                                    required>
                </lightning-combobox>
            </div>
            <div class="slds-col slds-size_2-of-12 slds-m-top_small">

            </div>
            <div class="slds-col slds-size_6-of-12 slds-m-top_small">
                <lightning-combobox name="progress" label="Credit Card/Invoice" value={paymentMethod}
                                    placeholder="Credit Card" options={lstPaymentMethods} onchange={handlePaymentChange}
                                    required>
                </lightning-combobox>
            </div>
            <div class="slds-col slds-size_7-of-12 slds-m-top_x-large">
                <c-pharmacy-modify-shipping-address enterprise-id={enterpriseId} record-id={recordId}
                                                    network-id={networkId} pharmacymemberaddresss={pharmacyaddress}
                                                    pharmacymemberdetails={pharmacydemodetails} onshippingaddress={updateShippingAddress} dropdown-alignment="auto">
                </c-pharmacy-modify-shipping-address>
            </div>
        </div>
    </div>
    <!--Credit Card Module-->
    <div class="slds-m-top_small">
        <template if:true={isCreateAndEditCreditCardVisible}>
            <c-pharmacy-create-and-edit-credit-card-hum record-id={recordId} enterprise-id={enterpriseId} network-id={networkId} component-mode={createAndEditCreditCardComponentMode}
                                                        credit-card-data={creditCardData} selected-row-data={selectedRowData}
                                                        onsave={handleSave} oncancel={handleCancel}>
            </c-pharmacy-create-and-edit-credit-card-hum>
        </template>
    </div>
    <template if:false={loaded}>
        <lightning-spinner alternative-text="Loading...">
        </lightning-spinner>
    </template>
</template>