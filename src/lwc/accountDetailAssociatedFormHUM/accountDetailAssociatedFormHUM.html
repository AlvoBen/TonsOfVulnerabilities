<!--
LWC Name        : accountDetailAssociatedFormHUM.html
Function        : LWC to display asscoiated account section on member details pages.

Modification Log:
* Developer Name                  Date                         Description
*------------------------------------------------------------------------------------------------------------------------------
* Rahul Krishan                  12/18/2020                Original Version (azure # 1614689) 
* Ashish Kumar                   02/20/2021                 US-1653194 related changes
* Supriya Shastri                03/12/2021                 US-1464380 Create password
* Pallavi Shewale	            29/07/2021		    US-2501707 Reusing this component to hide the header section in the humana pharamcy page.
* Mohan                         11/13/2021                    US: 2440592 Member Account Re design
* Bhakti Vispute                07/15/2022                  US: 3445817 Account Management - Implementations Missing (Part2) -Squads
****************************************************************************************************************************-->
<template>
    <div class="slds-section slds-is-open exapandable-associated hc-standard-table-styles">
        <article class="slds-card">
            <template if:true={displayheader}>
            <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                        <span class="slds-icon_container" title="account">
                            <lightning-icon icon-name="standard:account" alternative-text="Account" title="Account"
                                size="small" variant="success"></lightning-icon>
                            <span class="slds-assistive-text">account</span>
                        </span>
                    </div>
                    <div class="slds-media__body">
                        <div class="slds-card__header-title slds-show_inline">
                            <span class="slds-text-title_bold">Associated Forms &amp; Information ({iCount})</span>
                        </div>
                    </div>         
                </header>
            </div>
        
        </template>
        <template if:false={displayheader}>
            <details>
                <summary>
                    <div class="slds-p-bottom_large" style="background-color:#F3F2F2" onclick={handledisplaysection}>
                        <div style="float:left">
                            <div class="slds-text-title_bold"> Associated Forms & Information</div> 
                        </div>                        
                        <div style="float:right;width:15%">
                            <span class="slds-badge" > {iCount}</span>
                        </div>                        
                    </div> 
                </summary>
            </details>
           
        </template>
        <template if:true={displaysection}>
            <div aria-hidden="false" class="slds-card__body slds-section__content slds-p-top_none"
                id="expandAssociated">
                <div class="slds-tile__detail slds-text-body_small slds-p-horizontal_small">
                    <template if:true={isResults}>
                        <template for:each={oResponse} for:item="acc" for:index="ind">
                            <div key={acc.DocumentType} aria-hidden="false"
                                class="slds-section__content slds-p-top_none">
                                <div
                                    class="slds-tile__detail slds-text-body_small slds-wrap slds-p-bottom_small">

                                    <div class="slds-grid slds">
                                        <template if:true={acc.Accordian}>
                                            <lightning-button-icon data-att={ind} data-doctype={acc.extraFieldMapping}
                                                data-actionname={acc.iconName} icon-name={acc.iconName} size="small"
                                                onclick={expandrow} class="accordianPass">
                                            </lightning-button-icon>
                                        </template>
                                        <template if:false={acc.Accordian}>
                                            <span class="slds-p-left_large"></span>
                                        </template>                             
                                        <div class=slds-grid>
                                            <span class="slds-p-left_small">
                                                <b class="slds-p-right_xx-small heading-green">Document Type
                                                    &nbsp;
													<lightning-helptext content={labels.associatedFormsHelp}
                                                    class="slds-is-relative doc-type-tooltip">
                                                    </lightning-helptext> : </b>
                                                <b onclick={handleClick}>{acc.DocumentType}</b>
                                            </span>                                            
                                            <template if:false={acc.ETL_Record_Deleted__c}>
                                                <div class="slds-grid">
                                                    <lightning-helptext content={labels.UserPassword}
                                                        class="slds-is-relative doc-type-tooltip">
                                                    </lightning-helptext>
                                                    <div class="slds-is-relative gear-icon">
                                                        <lightning-icon icon-name="utility:settings" size="x-small"
                                                            onclick={expandlist} onblur={closeList} class="slds-p-left_medium"
                                                            style="margin-left:auto"></lightning-icon>
                                                        <template if:true={showQuestionList}>
                                                            <ul
                                                                class="slds-listbox slds-listbox_vertical action-list
                                                        slds-dropdown slds-m-left_medium slds-dropdown_left pwd-options-list slds-p-around_none
                                                        ">
                                                                <li if:true={showCreateQuestion} onclick={createPwdHandler}
                                                                    value="create"
                                                                    class="slds-media slds-media_center slds-media_small 
                                                        slds-p-vertical_x-small slds-p-horizontal_small slds-text-link_reset password-action">
                                                                    Create password</li>
                                                                <li if:false={showCreateQuestion} onclick={editPwdHandler}
                                                                    data-name="edit"
                                                                    class="slds-media slds-media_center slds-media_small 
                                                        slds-p-vertical_x-small slds-p-horizontal_small slds-text-link_reset password-action">
                                                                    Edit</li>
                                                                <li if:false={showCreateQuestion} onclick={deletePwdHandler}
                                                                    data-name="delete"
                                                                    class="slds-media slds-media_center slds-media_small 
                                                        slds-p-vertical_x-small slds-p-horizontal_small slds-text-link_reset password-action">
                                                                    Delete</li>
                                                            </ul>
                                                        </template>
                                                    </div>
                                                </div>
                                            </template>                                            
                                        </div>
                                    </div>
                                    <div class="slds-p-left_xx-large">

                                        <div class="slds-grid slds">
                                            <div class="slds-p-right_xx-small text-wrap"><b>Effective Date:&nbsp;</b>
                                                {acc.EffectiveDate}</div>
                                            <br />
                                        </div>
                                        <div class="slds-grid slds">
                                            <div class="slds-p-right_xx-small text-wrap"><b>Termination Date:&nbsp;</b>
                                                {acc.TerminationDate}</div>
                                        </div>
                                        <template if:true={acc.ETL_Record_Deleted__c}>
                                            <div class="slds-grid slds">
                                                <span class="slds-p-right_xx-small text-wrap"><b>Person of Authority:&nbsp;</b>
                                                    {acc.PersonofAuthority}</span>
                                            </div>
                                        </template>
                                        <!---THis Section is for Show Accordian fields***********************************-->
                                        <template if:true={acc.extraField}>
                                            <template for:each={accordianFields} for:item="flds">
                                                <div key={flds.label} class="slds-grid slds">
                                                    <div class="slds-p-right_xx-small text-wrap"><b>{flds.label}:&nbsp;</b>
                                                        {flds.value}</div>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </template>
                    <template if:false={isResults}>
                        <div class="no-result-message">
                            <c-search-no-result-hum no-result-message={labels.HUM_UserAssociated_No_Results}>
                            </c-search-no-result-hum>
                        </div>
                    </template>
                </div>
            </div>
            </template>            
        </article>
    </div>
</template>