<!-- /*******************************************************************************************************************************
LWC JS Name : claimPaymentDetailDetailHUM.HTML
Function    : This JS serves as UI to claimPaymentDetailDetailHUM

Modification Log: 
Developer Name           Code Review                      Date                         Description
*--------------------------------------------------------------------------------------------------------------------------------
Suraj Patil                                         14/08/2022                    User story 3530478
Raj Paliwal											19/09/2022					  User story 3831690
Suraj Patil                                         06/10/2022                    User story 3580835
Apurva Urkude                                       01/24/2023                    Defect Fix-7013
*********************************************************************************************************************************/ -->
<template>
    <lightning-card title='Claim Payment Details'>
        <template if:false={bIsLoading}>
            <template if:false={bDisplayPaymentsInfoMsg}>
                <template if:false={noData}>  
                    <div>
                        <lightning-layout slot="actions" class="slds-var-p-bottom_small" style="padding-right: 0.5rem;">
                            <lightning-layout-item size="8" class="left-align">
                                <div class="slds-float_left" style=" margin-left : 15px; margin-top:25px">
                                    {totalCount} item(s) displayed
                                </div>
                            </lightning-layout-item>
                            <lightning-layout-item size="2" class="right-align" style = "margin-top:15px;">
                                
                                    <b>Last Processed Date</b>
                                    <lightning-helptext
                                        content="The most recent processing of a claim will always display as the default view. Select other process date options to see previous processing details. Note: the related sequence will appear in parenthesis when available.">
                                    </lightning-helptext>
                                
                            </lightning-layout-item>
                            <lightning-layout-item size="2" class="right-align" style = "margin-top:-10px;">
                            
                                    <lightning-combobox
                                        name="sLastProcessDate"
                                        label=""
                                        value={value}
                                        placeholder=""
                                        options={lastProcessedoptions}
                                        onchange={handleChange}>
                                    </lightning-combobox>
                            
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>         
                    <div class="slds-var-p-left_x-small slds-var-p-right_small">
                        <table class="slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols slds-no-row-hover" 
                            role="grid" if:false={noData} >
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th class="" scope="col" style="width:3rem; padding: 15px;">
                                        <div class="slds-truncate"></div>
                                    </th>
                                    <th class="" scope="col" style="width: 11rem">
                                        <div class="slds-truncate" title="Claims Dates/ID">Claims Dates/ID</div>
                                    </th>
                                    <th class="" scope="col" style="width:8rem">
                                        <div if:true={focus1} class="my-class slds-truncate" title="Seq#">Seq#
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Seq#"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                        <div if:false={focus1} class="my-class2 slds-truncate" title="Seq#">Seq#
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Seq#"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                    </th>
                                    <th class="" scope="col" style="width:8rem">
                                        <div if:true={focus2} class="my-class slds-truncate" title="Payment Amount">Payment
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Payment"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                        <div if:false={focus2} class="my-class2 slds-truncate" title="Payment Amount">Payment
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Payment"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                    </th>
                                    <th class="" scope="col" style="width:8rem">
                                        <div if:true={focus3} class="my-class slds-truncate" title="Payment Method">Method
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Method"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                        <div if:false={focus3} class="my-class2 slds-truncate" title="Payment Method">Method
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Method"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                    </th>
                                    <th class="" scope="col" style="width:8rem">
                                        <div if:true={focus4} class="my-class slds-truncate" title="Payment Issue Date">Issue Date
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Issue Date"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                        <div if:false={focus4} class="my-class2 slds-truncate" title="Payment Issue Date">Issue Date
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Issue Date"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                    </th>
                                    <th class="" scope="col" style="width:10rem">
                                        <div if:true={focus5} class="my-class slds-truncate" title="Payee">Payee
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Payee"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                        <div if:false={focus5} class="my-class2 slds-truncate" title="Payee">Payee
                                            <lightning-icon
                                                onclick={handleSort}
                                                icon-name={sortDirHandler} 
                                                alternative-text="Payee"
                                                size="xx-small"
                                                class="slds-var-m-left_small">
                                            </lightning-icon>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                             <tbody onclick={handleLogging}>
                                <template for:each={PaymentDetailRecords} for:item="ele" for:index="ItemIndex">
                                    <tr key={ele.name} >
                                        <td role="gridcell " style = "padding: 15px;"  >
                                            <div>
                                                <lightning-button-icon icon-name="utility:chevronright" value={ItemIndex} variant="bare" title="" onclick={handleToggle}></lightning-button-icon>
                                            </div>
                                        </td>       
                                        <td  role="gridcell" style="padding: 15px;" >
                                            <div class="slds-cell-wrap logthis" data-id='Claims Dates/ID'  data-logid={generateLogId}> 
					   <div >
                                          <div class="lineBreak"  data-value='Claim Date:'>
                                             <b>Claim Date:</b> {lineItemAccordianData.sLastProcessDate}
                                              &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; 
                                            <b>ID:</b> {ele.sPaymentTypeID}
							</div>
							</div>
                                            </div>
                                        </td>
                                        <td  data-label="Seq#" role="gridcell" style="padding: 15px;" >
                                            <div class="slds-cell-wrap logthis" data-id="Seq#"  data-logid={generateLogId}>
                                                <div data-value={ele.sSequenceNum}>{ele.sSequenceNum}</div>
                                            </div>
                                        </td>
                                        <td data-label="Payment" role="gridcell" style="padding: 15px;" >
                                            <div class="slds-cell-wrap logthis" data-id="Payment"  data-logid={generateLogId}>
                                                <div data-value={ele.sPaymentAmount}>{ele.sPaymentAmount}</div>
                                            </div>
                                        </td>
                                        <td data-label="Method" role="gridcell" style="padding: 15px;">
                                            <div class="slds-cell-wrap logthis" data-id="Method"  data-logid={generateLogId}>
                                                <div data-value={ele.sPaymentType}>{ele.sPaymentType}</div>
                                            </div>
                                        </td>
                                        <td data-label="Issue Date" role="gridcell" style="padding: 15px;">
                                            <div class="slds-cell-wrap logthis" data-id="Issue Date"  data-logid={generateLogId}>
                                                <div data-value={ele.sPaymentIssueDate}>{ele.sPaymentIssueDate}</div>
                                            </div>
                                        </td>
                                        <td data-label="Payee" role="gridcell" style="padding: 15px;">
                                            <div class="slds-cell-wrap logthis" data-id="Payee"  data-logid={generateLogId}>
                                                <div data-value={ele.sPayee}>{ele.sPayee}</div>
                                            </div>
                                        </td>
                                    </tr>
									<template if:true={ele.Expanded}>
                                        <div key={ele.name} onclick={handleLogging}>
                                            <div key={ele.name} style =" margin-top: 10px;display: inline-flex;width: 1800%;margin-bottom: 10px;" onclick={handleLogging}>
                                                <div key={ele.name}  style="margin-left: 3rem; width: 850%; background: white;"> 
                                                    <div  data-logid={generateLogId}>
                                                    <lightning-layout style = "padding: 10px;" class="slds-border_bottom logthis" data-id="Status/Date">
                                                        <lightning-layout-item size="4">
                                                            <div class="slds-cell-wrap slds-text-align_left">
                                                                <p>Status/Date</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item size="8">
                                                            <div if:false={ele.isCHK} >
                                                                <div if:false={MTVEMPlatform}>
                                                                    <span>Access
                                                                        <a href={win} target="__blank" class="slds-m-left_xx-small slds-m-right_xx-small" onclick={OpenNewCASLegacywindow}>
                                                                            CAS
                                                                        </a>for additional details
                                                                    </span>
                                                                </div>
                                                                <div if:true={MTVEMPlatform}>
                                                                    <span>
                                                                        <a href={win} target="__blank" class="slds-m-left_xx-small slds-m-right_xx-small" onclick={OpenMTVNewLegacywindow}>
                                                                            Access MTV for additional detail
                                                                        </a>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <div if:true={ele.isCHK} >
                                                                <span>
                                                                    <a href={win} target="__blank" class="slds-m-left_xx-small slds-m-right_xx-small" onclick={OpenCheckStatusLink}>
                                                                        Access the Check Status Inquiry Tool
                                                                    </a>
                                                                </span>
                                                            </div>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                   </div>
                                                   <div  data-logid={generateLogId}>
                                                    <lightning-layout style = "padding: 10px;"  class="slds-border_bottom logthis" data-id="Remittance ID" data-value={lineItemAccordianData.sRemitNumber}>
                                                        <lightning-layout-item size="4">
                                                            <div class="slds-cell-wrap slds-text-align_left">
                                                                <p>Remittance ID</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item size="8">
                                                            <div>
                                                                <p>{lineItemAccordianData.sRemitNumber}</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                </div>
                                                <div  data-logid={generateLogId}>
                                                    <lightning-layout style = "padding: 10px;"  class="slds-border_bottom logthis" data-id="Payee Name" data-value={ele.sPayeeName}>
                                                        <lightning-layout-item size="4">
                                                            <div class="slds-cell-wrap slds-text-align_left">
                                                                <p>Payee Name</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item size="8">
                                                            <div>
                                                                <p>{ele.sPayeeName}</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                </div>
                                                </div>
                                                <div key={ele.name} style="margin-left: 3rem; width: 850%; background: white;"> 
                                                    <div  data-logid={generateLogId}>
                                                    <lightning-layout style = "padding: 10px;"  class="slds-border_bottom logthis" data-id="Payee ID" data-value={ele.sPayeeID}>
                                                        <lightning-layout-item size="4">
                                                            <div class="slds-cell-wrap slds-text-align_left">
                                                                <p>Payee ID</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item size="8">
                                                            <div>
                                                                <p>{ele.sPayeeID}</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                    </div>
                                                <div  data-logid={generateLogId}>
                                                    <lightning-layout style = "padding: 10px;" class="logthis" data-id="Payee Address"  data-value={ele.sPayeeAddress}>
                                                        <lightning-layout-item size="4">
                                                            <div class="slds-cell-wrap slds-text-align_left">
                                                                <p>Payee Address</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item size="8">
                                                            <div class=" slds-cell-wrap">
                                                                <p>{ele.sPayeeAddress}</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                </div>
                                                <div  data-logid={generateLogId}>
                                                    <lightning-layout style = "padding: 10px;" class="slds-border_bottom logthis" data-id="Bank Code" data-value={ele.sBankAccCode}>
                                                        <lightning-layout-item size="4">
                                                            <div class="slds-cell-wrap slds-text-align_left">
                                                                <p>Bank Code</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item size="8">
                                                            <div>
                                                                <p>{ele.sBankAccCode}</p>
                                                            </div>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                </div>
                                                </div>
                                            </div>
                                            <div style= "width:1800%; margin-left: 3rem; margin-bottom: 10px;">
                                                <div class="slds-grid logthis" style= "padding: 5px; background: rgb(245, 241, 243);">
                                                    <span class="slds-var-p-left_x-small" style="font-weight: bold;">Related Claim Numbers</span>
                                                </div>
                                                <template for:each={ele.ClaimDetails.ClaimDetail} for:item="elePC" for:index="ItemIndexPC">
                                                    <div key={ele.name} onclick={handleLogging} > 
                                                    
                                                        <lightning-layout style = "padding: 10px;" class="slds-border_bottom"  multiple-rows="true">
                                                           
                                                            <lightning-layout-item  size="6">
                                                                <div class="logthis" data-id={getclaimnumber} data-logid={generateLogId} data-value={elePC.ClaimNumber}>
                                                                <lightning-layout multiple-rows="true">
                                                            <lightning-layout-item size="4">
                                                                <div class="slds-cell-wrap slds-text-align_left">
                                                                    <p>Claim Number {elePC.Counter}</p>
                                                                </div>
                                                            </lightning-layout-item>
                                                            <lightning-layout-item size="8">
                                                                <div>
                                                                    <p>{elePC.ClaimNumber}</p>
                                                                </div>
                                                            </lightning-layout-item>
                                                        </lightning-layout> </div>
                                                    

                                                        </lightning-layout-item>
                                                        
                                                            <lightning-layout-item  size="6">
                                                                <div  class="logthis" data-id={getClaimPayment} data-logid={generateLogId} data-value={elePC.ClaimPaymentAmount}>
                                                                <lightning-layout multiple-rows="true">
                                                            <lightning-layout-item size="4">
                                                                <div class="slds-cell-wrap slds-text-align_left">
                                                                    <p>Paid Amount {elePC.Counter}</p>
                                                                </div>
                                                            </lightning-layout-item>
                                                            <lightning-layout-item size="8">
                                                                <div>
                                                                    <p>${elePC.ClaimPaymentAmount}</p>
                                                                </div>
                                                            </lightning-layout-item>
                                                        </lightning-layout></div>
                                                        </lightning-layout-item>
                                                        </lightning-layout>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </template>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </template>
                <template if:true={noData}>
                    <div>
                        <c-search-no-result-hum no-result-message="No records to display" message-with-icon="true"></c-search-no-result-hum>
                    </div>
                </template>
            </template>
            <template if:true={bDisplayPaymentsInfoMsg}>
				<div>
                    <lightning-layout slot="actions" class="slds-var-p-bottom_small" style="padding-right: 0.5rem;">
                        <lightning-layout-item size="8" class="left-align">
                        </lightning-layout-item>
                        <lightning-layout-item size="2" class="right-align" style = "margin-top:15px;">
                                <b>Last Processed Date</b>
                                <lightning-helptext
                                    content="The most recent processing of a claim will always display as the default view. Select other process date options to see previous processing details. Note: the related sequence will appear in parenthesis when available.">
                                </lightning-helptext>
                        </lightning-layout-item>
                        <lightning-layout-item size="2" class="right-align" style = "margin-top:-10px;">
                                <lightning-combobox
                                    name="sLastProcessDate"
                                    label=""
                                    value={value}
                                    placeholder=""
                                    options={lastProcessedoptions}
                                    onchange={handleChange}>
                                </lightning-combobox>
                        </lightning-layout-item>
                    </lightning-layout>
                </div>
                <lightning-layout if:true={bDisplayPaymentsInfoMsgMTV}>
                    <lightning-layout-item size="12">
                        <div style="background: #efefef;" class="slds-var-p-around_small">
                            <span class="slds-var-m-right_small">
                                <lightning-icon
                                    icon-name="utility:info"
                                    alternative-text="info"
                                    size="small">
                                </lightning-icon>
                            </span>
                            <span>
                                <a href={win} target="__blank" class="slds-m-left_xx-small slds-m-right_xx-small" onclick={OpenMTVNewLegacywindow}>
                                    Access MTV for payment Details
                                </a>
                            </span>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
                <lightning-layout if:true={bDisplayPaymentsInfoMsgCAS}>
                    <lightning-layout-item size="12">
                        <div style="background: #efefef;" class="slds-var-p-around_small">
                            <span class="slds-var-m-right_small">
                                <lightning-icon
                                    icon-name="utility:info"
                                    alternative-text="info"
                                    size="small">
                                </lightning-icon>
                            </span>
                            <span>
                                <a href={win} target="__blank" class="slds-m-left_xx-small slds-m-right_xx-small" onclick={OpenNewCASLegacywindow}>
                                    Access CAS for payment details
                                </a>
                            </span>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
            </template>
        </template>
        <template if:true={bIsLoading}>
            <div style="height: 300px;"></div>
            <div class="loading-spinner" >
                <lightning-spinner alternative-text="Loading" variant ="Brand" size="Large"></lightning-spinner>
            </div>
        </template>
    </lightning-card>
</template>