<!--
LWC Name        : caseRelatedInformationHum.html
Function        : LWC to display Related Information section on Case Detail page.

Modification Log:
* Developer Name                  Date                         Description
*------------------------------------------------------------------------------------------------------------------------------
* Gowthami Thota                  10/10/2021                   initial version
****************************************************************************************************************************-->
<template>
    <article class="slds-brand-band slds-card slds-card_boundary headerBottomBorder forceRelatedListCardDesktop">
        <div
            class="slds-page-header--object-home slds-page-header_joined slds-page-header slds-shrink-none test-headerRegion forceListViewManagerHeader">
            <template if:true={issubtab}>
                <h1 style="font-size: 1rem;">
                    <lightning-formatted-url value="/my/path"  target="_blank" label={goTOCaseLabel} onclick={goBackToCase}></lightning-formatted-url>
                </h1>
            </template>
            <header
                class=" slds-card__header slds-grid slds-p-right_none slds-media slds-media_center slds-has-flexi-truncate hc-align-header slds-p-around_none slds-m-bottom_none">
                <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:case"></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">Related Information ({totalRecords})</h2>
                </div>
            </header>
        </div>
        <div style="overflow-x: auto">
            <table class="slds-table slds-table_bordered"
                aria-labelledby="element-with-table-label other-element-with-table-label">
                <thead>
                    <tr>
                        <td style="background-color: #F3F3F3;"></td>
                        <template for:each={logColumns} for:item="col">
                            <th class="" scope="col" key={col.label}>
                                <div class="slds-truncate" title={col.label}>{col.label}</div>
                            </th>
                        </template>
                    </tr>
                </thead>
                <tbody>
                    <template if:false={noLogData}>
                        <template for:each={loggeddata} for:item="item" for:index="index">
                            <tr class="slds-hint-parent" key={item.Id}>
                                <td>
                                    <lightning-icon icon-name="utility:chevronright" alternative-text="Expand"
                                        title="Expand" size="x-small" data-id={index} onclick={handleAccordian}>
                                    </lightning-icon>
                                </td>
                                <td data-label="Source" data-id={item.sourceSys}>
                                    <div class="slds-truncate" title="Source">{item.sourceSys}</div>
                                </td>
                                <td data-label="Type" data-id={item.attachmentType}>
                                    <div class="slds-truncate" title="Type">{item.attachmentType}</div>
                                </td>
                                <td data-label="Attachment ID">
                                    <div class="slds-truncate" title="Attachment ID">{item.attachmentId}</div>
                                </td>
                                <td data-label="Created Date">
                                    <div class="slds-truncate" title="Created Date">
                                        {item.loggedDateTime}
                                    </div>
                                </td>
                                <td data-label="Created By">
                                    <div class="slds-truncate" title="Created By">{item.loggedBy}</div>
                                </td>
                            </tr>
                            <template if:true={displayAccordianData}>
                                <tr key={item.id}>
                                    <td colspan="6">
                                        <c-related-info-log-item-hum data-id={index} case-id={recordId}
                                            att-log-id={item.attachmentId} class="slds-show">
                                        </c-related-info-log-item-hum>
                                    </td>
                                </tr>
                            </template>
                            <template if:false={displayAccordianData}>
                                <tr key={item.id}>
                                    <td colspan="6" style="border:none">
                                        <c-related-info-log-item-hum data-id={index} case-id={recordId}
                                            att-log-id={item.attachmentId} class="slds-hide">
                                        </c-related-info-log-item-hum>
                                    </td>
                                </tr>
                            </template>
                        </template>
                    </template>
                </tbody>
            </table>
        </div>
        <template if:true={noLogData}>
            <div class="slds-p-around_small">
                <p style="text-align:center">No Records to Display</p>
            </div>
        </template>
        
        <template if:true={recordslength}>
            <button class="slds-button slds-button_stretch slds-button_neutral slds-is-static hc-cursor"
                 onclick={onViewAllClick}>{labels.HUMViewAll}</button>
        </template>
    </article>
</template>