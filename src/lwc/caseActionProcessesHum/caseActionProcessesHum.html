<template>
    <lightning-card title="Processes" icon-name="standard:process">
        <template if:true={bDisplayProcesses}>
            <template if:true={bDisplayRecommendedProcess}>
                <div>
                    <div class="slds-text-heading_small slds-m-left_x-small">
                        {label.recommendedProcesses}
                    </div>
                    <template for:each={lstProcess.lstRecommendedProcess} for:item="process">
                        <div class="slds-p-around_small" key={process}>
                            <span data-name={process} style="color: rgb(1, 118, 211); cursor: pointer;"
                                onclick={launchProcess}>{process}</span>
                        </div>
                    </template>
                </div>
            </template>
            <div>
                <div class="slds-text-heading_small slds-m-left_x-small">
                    {label.availableProcesses}
                </div>
                <template if:true={bDisplayWebIssueProcess}>
                    <div class="slds-p-around_small">
                        <span data-name="Mail Order Pharmacy Web Issues" style="color: rgb(1, 118, 211); cursor: pointer;"
                            onclick={launchProcess}>Mail Order Pharmacy Web Issues</span>
                    </div>
                </template>
            </div>
        </template>
    </lightning-card>
    <!--<template if:true={loadWebIssueProcess}>
        <c-pharmacy-web-issues-hum caseid={recordId}></c-pharmacy-web-issues-hum>
    </template>-->
    <template if:true={loadGuidedFlow}>
        <div>
            <section role="dialog" tabindex="-1"
                class="slds-modal slds-fade-in-open slds-modal_medium flow-modal-component"
                aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">
                <div class="slds-modal__container">
                    <header class="slds-modal__header">
                        <lightning-button-icon icon-name="utility:close" alternative-text="Close this window"
                            size="large" variant="bare-inverse" onclick={closeModal} class="slds-modal__close">
                        </lightning-button-icon>
                        <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Pharmacy Web Issues</h2>
                    </header>
                    <template if:true={flowname}>
                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                            <c-screen-flow onflowstatuschange={finishcheck} onflowfailed={handleFlowFailed} width="100%"
                                height="500px;" flow-name={flowname} flow-params={flowParamsJSON}>
                            </c-screen-flow>
                            <template if:true={bDisplayErrorMessage}>
                                <p style="color: red;">Not able to finish the flow untill all the required questions are
                                    completed.</p>
                            </template>
                        </div>
                    </template>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open flow-modal-component"></div>
        </div>
    </template>
    <template if:true={isConfirmingFlowExit}>
        <div>
            <section role="alertdialog" tabindex="0" aria-labelledby="prompt-heading-id"
                aria-describedby="prompt-message-wrapper" class="slds-modal slds-fade-in-open slds-modal_prompt"
                aria-modal="true">
                <div class="slds-modal__container custom-modal-settings">
                    <header class="slds-modal__header slds-theme_error slds-theme_alert-texture">
                        <h2 class="slds-text-heading_medium" id="prompt-heading-id">Unsaved Changes</h2>
                    </header>
                    <div class="slds-modal__content slds-p-around_medium" id="prompt-message-wrapper">
                        <p class="slds-align_absolute-center">You will lose any unsaved changes. Are you sure you
                            want to continue?</p>
                    </div>
                    <footer class="slds-modal__footer slds-theme_default">
                        <lightning-button class="slds-var-m-right_small" variant="brand-outline" label="Cancel"
                            onclick={handleCancelFlowExit}></lightning-button>
                        <lightning-button variant="brand-outline" label="Continue" onclick={handleContinueFlowExit}>
                        </lightning-button>
                    </footer>
                </div>
            </section>
        </div>
    </template>
</template>