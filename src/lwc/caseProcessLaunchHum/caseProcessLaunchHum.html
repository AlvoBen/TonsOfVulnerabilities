<!--
LWC Name        : caseGnaComponentHum.html
Function        : LWC to display create case screen.

Modification Log:
* Developer Name                  Date                         Description
*------------------------------------------------------------------------------------------------------------------------------
* Santhi Mandava                                                07/28/2022                   Original version
* Santhi Mandava                                                09/01/2022                   US3279633 QAA Template changes
* Bhumika DOdiya               09/02/2022               US3751656 : Case Resolution - Action Component - Recommended Process Template Restriction based on Status of Case
* Disha Dole                   12/06/2022                       DF-6628 - Action component Header in the Right panel behaving as button and When clicked page is reloading
* Prasuna Pattabhi             02/01/2023                      US-4178418 : TRR Process Template on Case Details Page
* Jasmeen Shangari             04/13/2023                      US-4420520 : Design & Implementation of a fix to ensure the TRR template does not override the Good Cause reinstatement template
-------------------------------------------------------------------------------------------------------------------------------
-->
<template>
    <div>
        <div class="slds-card">
            <ul class="" role="tablist">
                <li class="" title="Suggested Actions" role="presentation">
                    <lightning-icon icon-name={iconName} alternative-text="Actions" title="Actions"
                                    style="float: left"></lightning-icon>
                    <h2 style="padding-left:47px;padding-top:0px!important">{headingName} </h2>
                </li>
            </ul>
            <template if:true={showRecommendedActions}>
                <div id="tab-default-1" class="slds-tabs_default__content slds-show" role="tabpanel"
                     aria-labelledby="tab-default-1__item" style="padding-top:0px;background:white">
                    <div class="slds-border_bottom">
                        <template  if:false={isCloseCase} for:each={lstVisibleTemplates} for:item="acc">
                            <template if:true={acc.hasAccess}>
                                <template if:true={acc.showInAction}>
                                    <span key={acc.templateName} data-name={acc.templateName} class={linkStyle}
                                          onclick={launchProcess}>{acc.templateLabel}<br /><br /></span>
                                </template>
                            </template>
                        </template>
                        <template if:true={isCloseCase}>
                            <p style="text-align:center"> No available Process Templates </p><br/>
                        </template>
                        <template if:false={isCloseCase}>
                            <template if:false={isTemplatesVisible}>
                                <div class="slds-align_absolute-center slds-p-bottom_small">
                                    {noTemplateLinksMessage}
                                </div>
                            </template>
                            <template if:true={showViewAll}>
                                <div slot="footer">
                                    <div class="slds-align_absolute-center slds-box" if:true={showViewAll}><a data-name={viewAllLinkLabel} onclick={handleViewAllClick}>{viewAllLinkLabel}</a> </div>
                                </div>
                            </template>
                        </template>
                    </div>
                </div>
            </template>
            <template if:true={showAttachedTemplates}>
                <template if:true={isTemplateAttached}>
                    <template for:each={executedProcessesList} for:item="acc">
                        <template if:true={acc.hasAccess}>
                            <span key={acc.CaseTemplateId} data-target-id={acc.CaseTemplateId}
                                  data-townerid={acc.TemplateSubmissionOwnerId} data-name={acc.ProcessType}
                                  data-id={acc.CaseTemplateId}
                                  class="spancls"
                                  style="color: rgb(1, 118, 211); cursor: pointer;padding-left: 12px;text-decoration: underline;"
                                  onclick={launchExecutedProcess}>{acc.ProcessType}
                            </span>
                            <table key={acc.ProcessType} style="margin-bottom: 10px;">
                                <tr>
                                    <td>Created by {acc.CreatedBy}</td>
                                    <td style="text-align: right;padding-right: 12px;">{acc.CreatedDate}</td>
                                </tr>
                                <tr>
                                    <td>Last Modified by {acc.LastModifiedBy}</td>
                                    <td style="text-align: right;padding-right: 12px;">{acc.LastModifiedDate}</td>
                                </tr>
                            </table>
                        </template>
                    </template>
                </template>
                <template if:false={isTemplateAttached}>
                    <div class="slds-align_absolute-center slds-p-bottom_small">
                        {labels.NO_RECORDS_MSG_HUM}
                    </div>
                </template>
            </template>
        </div>
        <template if:true={showTRR}>
            <div class="slds-card">
                <ul class="" role="tablist">
                    <li class="" title="Suggested Actions" role="presentation">
                        <lightning-icon icon-name={iconName} alternative-text="Actions" title="Actions"
                                        style="float: left"></lightning-icon>
                        <h2 style="padding-left:47px;padding-top:0px!important">{trrHeadingName} </h2>
                    </li>
                </ul>
                <template if:true={hasTRRprocesses}>
                    <br>
                    <template for:each={trrData} for:item="acc">
                        <span key={acc.CaseTemplateId} data-target-id={acc.CaseTemplateId}
                              data-townerid={acc.TemplateSubmissionOwnerId} data-name={acc.ProcessNumber}
                              data-id={acc.CaseTemplateId}
                              class="spancls"
                              style="color: rgb(1, 118, 211); cursor: pointer;padding-left: 12px;text-decoration: underline;"
                              onclick={launchExecutedTRRProcess}>TRR : {acc.ProcessNumber}
                        </span>
                        <table key={acc.ProcessNumber} style="margin-bottom: 10px;">
                            <tr>
                                <td>Created Date</td>
                                <td style="text-align: right;padding-right: 12px;">{acc.CreatedDate}</td>
                            </tr>
                            <tr>
                                <td>Reply Code</td>
                                <td style="text-align: right;padding-right: 12px;">{acc.ReplyCode}</td>
                            </tr>
                            <tr>
                                <td>Effective Date</td>
                                <td style="text-align: right;padding-right: 12px;">{acc.EffectiveDate}</td>
                            </tr>
                            <tr>
                                <td>Processing Date Stamp </td>
                                <td style="text-align: right;padding-right: 12px;">{acc.ProcessedDate}</td>
                            </tr>
                        </table>
                        <template if:false={acc.isLast}>
                            <hr key={acc.ProcessNumber} style="margin-top: 12px;margin-bottom: 12px;">
                        </template>
                    </template>
                    <template if:true={viewAll}>
                        <button onclick={onViewAllClick}
                                class="slds-button slds-button_stretch slds-button_neutral slds-is-static hc-cursor" style="height:50px">
                            View All</button>
                    </template>

                </template>
                <template if:false={hasTRRprocesses}>
                    <div class="slds-align_absolute-center slds-p-bottom_small">
                        No records to display
                    </div>
                </template>
            </div>
        </template>
        <template if:true={openMed_Modal}>
            <c-rcc-template-summary-page-hum is-modal-open={openMed_Modal}  record-id={recordId} template-id ={templateId}  template-name={selectedProcessName} ongetclosevalue={childCloseEvent} ></c-rcc-template-summary-page-hum>
        </template>
    </div>
</template>