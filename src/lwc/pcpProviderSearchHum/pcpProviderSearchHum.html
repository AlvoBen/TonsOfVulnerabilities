<!--
LWC Name        : pcpprovidersearch.html
Function        : LWC to display pcp provider search screen.

Modification Log:
* Developer Name                  Date                         Description
*------------------------------------------------------------------------------------------------------------------------------
* Nirmal Garg                     08/30/2022                  initial version US3602368
* Atul Patil                       07/25/2023                   DF-7917
****************************************************************************************************************************-->
<template>
    <div class="slds-m-vertical_small">
        <!-- <lightning-card> -->
            <div class="lgc-bg">
                <div class="slds-grid slds-wrap">
                    <div class="slds-col slds-size_4-of-12 slds-p-around_xx-small">
                        <lightning-combobox name="distance" label="Distance" value={inputMiles}
                            placeholder="Select Miles" options={lstDistance} onchange={handleMilesInput} required>
                        </lightning-combobox>
                    </div>
                    <div class="slds-col slds-size_4-of-12 slds-p-around_xx-small">
                        <c-generic-keyword-search-hum minchar="3" placeholder="Keyword Search" name="searchByWord"
                            label="Physician Name" keyword={keyword} ontextclear={clearSearchData}
                            onkeywordvalue={handleKeywordSearch}></c-generic-keyword-search-hum>
                    </div>
                    <div class="slds-col slds-size_2-of-12 slds-p-around_xx-small">
                        <div class="slds-form-element">
                            <label class="slds-form-element__label" for="text-input-id-1">Zip Code</label>
                            <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right">

                                <lightning-input required type="text" label="Zip Code" onchange={handleZipCodeInput}
                                    max-length="5" min-length="5" class="zipcode" value={zipcode} placeholder="Zip Code"
                                    message-when-too-short="Please enter valid zip code." variant="label-hidden">
                                </lightning-input>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_2-of-12 slds-m-top_large">
                        <div class="slds-m-top_xx-small"></div>
                        <lightning-button variant="brand" label="Search" onclick={handleSearchClick}
                            class="slds-m-left_x-small "></lightning-button>
                    </div>
                </div>
                <div class="slds-grid slds-wrap">
                    <div class="slds-col slds-size_1-of-1">
                        <template if:true={loaded}>
                            <template if:true={isDataAvailable}>
                                <div class="slds-col slds-size_1-of-1">
                                    <div class="slds-table--header-fixed_container">
                                        <div class="slds-scrollable_y container" style="height: 100%;"
                                             onscroll={handleScroll}>
                                            <table class="slds-no-row-hover slds-table slds-table_bordered slds-table--header-fixed">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <template for:each={providersearchLayout} for:item="col">
                                                            <template if:true={isIcon}>
                                                                <th key={col.label}></th>
                                                            </template>
                                                            <template if:false={isIcon}>
                                                                <th scope="col" key={col.label} style={col.style}
                                                                    data-iconname={col.iconname} data-label={col.label}
                                                                    data-id={col.mappingField} data-sortable={col.sortable}
                                                                    onmouseenter={handleMouseEnter}
                                                                    onmouseleave={handleMouseLeave} onclick={onHandleSort}>
                                                                    <div class="slds-p-top_x-small slds-truncate slds-cell-fixed slds-m-left_x-small"
                                                                         title={col.label} style="width: 100%;">
                                                                        {col.label}
                                                                        <span>
                                                                            <template if:false={col.mousehover}>
                                                                                <template if:true={col.sorting}>
                                                                                    <lightning-icon class="slds-var-m-left_small remove-display-sort-icon"
                                                                                                    icon-name={col.iconname}
                                                                                                    size="xx-small">
                                                                                    </lightning-icon>
                                                                                </template>
                                                                            </template>
                                                                            <template if:true={col.mousehover}>
                                                                                <lightning-icon class="slds-var-m-left_small remove-display-sort-icon"
                                                                                                icon-name={col.mousehovericon}
                                                                                                size="xx-small">
                                                                                </lightning-icon>
                                                                            </template>
                                                                        </span>
                                                                    </div>
                                                                </th>
                                                            </template>
                                                        </template>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <template for:each={filteredProviders} for:item="item">
                                                        <tr class="slds-hint-parent" key={item.id}>
                                                            <td data-label="Select" style="width:1%">
                                                                <template if:true={item.patientStatus}>
                                                                    <template if:true={item.checked}>
                                                                        <input type="radio" name={item.id} data-id={item.id}
                                                                               checked onclick={handleRadioClick}>
                                                                    </template>
                                                                    <template if:false={item.checked}>
                                                                        <input type="radio" name={item.id} data-id={item.id}
                                                                               onclick={handleRadioClick}>
                                                                    </template>
                                                                </template>
                                                                <template if:false={item.patientStatus}>
                                                                    <input type="checkbox" class="chkbox" disabled
                                                                           title="Not accepting new patients." />
                                                                </template>
                                                            </td>
                                                            <td data-label="Physician Name" style="width:16%">
                                                                <div class="slds-cell-wrap slds-text-title_bold"
                                                                     title={item.physicianName}>
                                                                    {item.physicianName}
                                                                </div>
                                                            </td>
                                                            <td data-label="PCP#" style="width:12%">
                                                                <div class="slds-cell-wrap" title={item.pcpNumber}>
                                                                    {item.pcpNumber}
                                                                </div>
                                                            </td>
                                                            <td data-label="Address" style="width:14%">
                                                                <div class="slds-cell-wrap" title={item.physicianAddress}>
                                                                    {item.physicianAddress}
                                                                </div>
                                                            </td>
                                                            <td data-label="Phone" style="width:14%">
                                                                <div class="slds-cell-wrap" title={item.phone}>
                                                                    {item.phone}
                                                                </div>
                                                            </td>
                                                            <td data-label="Distance" style="width:12%">
                                                                <div class="slds-cell-wrap slds-text-title_bold"
                                                                     title={item.physicianDistance}>
                                                                    {item.physicianDistance}
                                                                </div>
                                                            </td>
                                                            <td data-label="Specialities" style="width:14%">
                                                                <div class="slds-cell-wrap" title={item.specialty}>
                                                                    {item.specialty}
                                                                </div>
                                                            </td>
                                                            <td data-label="Provider Status" style="width:16%">
                                                                <div class="slds-cell-wrap" title={item.providerStatus}>
                                                                    {item.providerStatus}
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </template>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </template>
                        <template if:true={loaded}>
                            <template if:false={isDataAvailable}>
                                <div class="slds-col slds-size_1-of-1 slds-m-top_small slds-wrap">
                                    <c-generic-scoped-notification-hum iconname="utility:info"
                                        message="No data available.">
                                    </c-generic-scoped-notification-hum>
                                </div>
                            </template>
                        </template>
                        <template if:false={loaded}>
                            <lightning-spinner alternative-text="Loading"></lightning-spinner>
                        </template>
                    </div>
                </div>
                <div class="slds-var-m-bottom_medium"></div>
            </div>
        <!-- </lightning-card> -->
    </div>
</template>