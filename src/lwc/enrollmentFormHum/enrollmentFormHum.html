<!--
LWC Name        : enrollmentFormHum.html
Function        : Enrollment Search Form

Modification Log:
* Developer Name                  Date                         Description
*
* RajKishore                      11/21/2020                Original Version 
* Supriya Shastri                 02/24/2021                Added generic dropdown
* Anil Kumar                      07/15/2021               Adding  Unknown Member Component 
* Mohan Kumar N                   08/09/2021                US: 2363825 - standardizing icons
* Supriya Shastri                 09/25/2021                US-2548741 Fields retention
* Supriya Shastri                10/18/2021                DF-3897
*-->
<template>
    <template if:true={loaded}>
        <div class="form-format slds-p-around_x-small">
            <div class="slds-card">
                <div class="slds-grid slds-media_center slds-p-around_x-small">
                    <div class="slds-media__figure">
                        <lightning-icon icon-name="standard:folder" alternative-text="Account" title="Account">
                        </lightning-icon>
                    </div>
                    <h2 class="slds-card__header-title"><span class="slds-text-heading_small slds-truncate">
                            <h1 class="slds-p-around_none">{labels.enrollmentSearchFormTitle}</h1>
                        </span></h2>
                </div>
                <lightning-layout multiple-rows>
                    <template for:each={formFields} for:item="formval" for:index="ind">
                        <lightning-layout-item key={formval.value} size={formval.size} class="slds-p-around_x-small">
                            <template if:true={formval.text}>
                                <div class="slds-col">
                                    <div class="slds-grid">
                                        <span
                                            class="slds-form-element__label slds-no-flex label-overflow">{formval.label}
                                        </span>
                                        <lightning-helptext if:true={formval.helpText} content={formval.helpText}
                                            class="start-help-text">
                                        </lightning-helptext>
                                    </div>
                                    <lightning-input variant="label-hidden" class={formval.class} type="text"
                                        value={formval.val} name={formval.fieldName} onkeyup={onFieldChange}
                                        onfocus={highlightMandatoryFields} onblur={removehighlight}
                                        maxlength={formval.maxLength}>
                                    </lightning-input>
                                </div>
                            </template>
                            <template if:true={formval.date}>
                                <div class="slds-col">
                                    <div class="slds-form-element__label slds-no-flex label-overflow">{formval.label}
                                    </div>
                                    <lightning-input data-index={ind} class={formval.class} type="text"
                                        value={formval.val} onkeyup={formatDateOnKeyUp} date-style="short"
                                        name={formval.fieldName} variant="label-hidden" max-length="10"
                                        onfocus={highlightMandatoryFields} onblur={onDateFieldBlur} onchange={handleFieldChange}> 
                                    </lightning-input>
                                </div>
                            </template>

                            <template if:true={formval.picklist}>
                             <div class="slds-col">
                                   
                                   <c-generic-drop-down-hum options={stateOptions} value={sState}
                                        placeholder={labels.dropdownPlaceholderHum}
                                        onselect={stateSelectionHandler} onclear={clearStateHandler}
                                        has-selection={stateValue} custom-css={customCss}
                                        is-valid={showValidationMsg} label={formval.label}>
                                    </c-generic-drop-down-hum>
                                      
                                    <div if:true={showValidationMsg} class="slds-col">
                                        <div class="slds-text-color_error message-container">
                                            <span>{formval.requiredMsg}</span>
                                        </div>
                                    </div>
                                </div> 
                                 </template>
                        </lightning-layout-item>
                      </template>
                    <template if:true={showAddtionalSearchError}>
                        <lightning-layout-item size="12">
                            <p class="slds-text-color_error message-container">
                                {labels.enrollmentSearchFormAdditonalFieldError}</p>
                        </lightning-layout-item>
                    </template>
                </lightning-layout>
                <div if:true={ssnBlankMessage} class="slds-col">
                    <div class="slds-text-color_error message-container">
                        {ssnBlankMessage}</div>
                </div>
                <div if:true={blankDatesMessage} class="slds-col">
                    <div class="slds-text-color_error message-container">
                        {blankDatesMessage}</div>
                </div>

                <div if:true={showTRRmandatFieldsMsg} class="slds-col">
                    <div class="slds-text-color_error message-container">
                        {labels.TRR_FN_LN_BD_Error}</div>
                </div>

                <div if:true={showErrorMessage} class="slds-col">
                    <div class="slds-text-color_error message-container">
                        {labels.memberSearchAtleastOneHum}</div>
                </div>

                <div if:true={showDateComparisonMessage} class="slds-col">
                    <div class="slds-text-color_error message-container">
                        {labels.enrollmentDateCompareMsg}</div>
                </div>

                <div class="slds-clearfix slds-var-p-top_large">
                    <div class="slds-grid slds-grid_vertical slds-p-horizontal_x-small">
                        <div class="slds-col">
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col">
                                    <button class="slds-button slds-button_stretch slds-button_neutral"
                                        onclick={reset}>Reset</button>
                                </div>
                                <div class="slds-col slds-var-p-left_small">
                                    <button class="slds-button slds-button_stretch slds-button_brand"
                                        onclick={onSearchClick}>Search</button>
                                </div>
                            </div>
                        </div>
                        <div class="slds-col">
                            <div class="slds-text-color_error message-container" id="error"></div>
                        </div>
                        <div class="slds-col ">
                            <div class="slds-var-p-top_small">
                                <button class="slds-button slds-button_stretch slds-button_neutral"
                                    onclick={handleCreate} name="btnCreate">
                                    {labels.HUMcreateUnknown}</button>
                            </div>
                        </div>
                           <!--Adding Unknonwn Member Component to create Unknown records -->
                           <c-create-unknown-member oneventname={handleevent}></c-create-unknown-member>
                            </div>
                        </div>
                    </div>
                </div>
    </template>
</template>