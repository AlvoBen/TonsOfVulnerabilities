<!--
Function        : LWC to display Highlights section on Policy details pages.

Modification Log:
* Developer Name                  Date                         Description
*------------------------------------------------------------------------------------------------------------------------------
* Mohan Kumar N                  04/22/2021                US #: 1464525
* Supriya Shastri                07/05/2021                US: 2158825 Low income subisy icon
* Supriya                        06/04/2021                US: 2176313
*Aishwarya Pawar                 05/13/2022                REQ - 3285223 Alert Configuration on Plan Member Page
*Supriya                        11/01/2022                Added new case button
* Supriya Shastri				 03/16/2021				      US-1985154
* Nilanjana Sanyal               03/10/2022				   US: 3082787 - Saperating the icon display in a common component commonHighlightPanelIconHum
* Muthu kumar                    06/17/2022                 DF-5051
* Nilanjana Sanyal               06/16/2022                 DF-5116: Lightning_US 3082787 -  Icon visibility / Plan Member Page - (...) dots are being visible for less than 4 Icons
* Aishwarya Pawar               07/14/2022                 REQ-3318229
* Vardhman Jain                  09/02/2022                US: 3043287 Member Plan Logging stories Changes.
* Nirmal Garg                    12/06/2022                 US-3975339 Change - RTI Icon Display Logic
* Nirmal Garg                		01/04/2023                 DF-6907
* Abhishek Mangutkar			 01/23/2023					US 4134646
* Jonathan Dickinson             03/31/2023                User Story 4414983: T1PRJ0865978 - Next Best Action- Move the Existing alerts on Person Account & Plan Member to right hand side 
* Hima Bindu Ramayanam          08/04/2023                  User Story 4811589: T1PRJ0865978- MF23283 - C06: Consumer Management: Disablement of new case creation for legacy delete members & plans.
* Pinky Vijur                   10/09/2023                  User Story 5066626: T1PRJ0865978- MF 27275- Mail Order Management: Pharmacy - Plan Member Page 'Mail Order – Register' Button
****************************************************************************************************************************-->
<template>
    <div if:true={bDataLoaded} class="slds-page-header slds-page-header_record-home">
        <div class="highlights-container">
            <div class="slds-grid slds-wrap">
                <div class="slds-col slds-page-header__row slds-grid_vertical-align-center">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__figure">
                                <lightning-icon icon-name={header.icon.name} size={header.icon.size}
                                                slot="icon">
                                </lightning-icon>
                            </div>
                            <div class="slds-media__body">
                                <div class="slds-page-header__name">
                                    <div class="slds-page-header__name-title">
                                        <h1>
                                            <span>{header.name}</span>
                                            <span class="slds-page-header__title slds-truncate slds-text-heading_medium slds-m-top_x-small">
                                                <b>{sMemberName}</b>
                                            </span>
                                        </h1>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slds-page-header__col-actions">
                        <div class="slds-page-header__controls">
                            <div class="slds-page-header__control action-button-col">
                                <div>
                                    <div class="slds-grid slds-wrap slds-grid_align-end">
                                        <lightning-button disabled={isNewCaseDisabled} variant="brand-outline" name="verify" label="New Case"
                                                          onclick={openNew}>
                                        </lightning-button>
										<template if:true={showMailOrderPharmacy}>
                                            <div class="slds-m-left_x-small">
                                                <lightning-button variant="brand-outline" label="Mail Order Pharmacy" title="Mail Order Pharmacy" onclick={handleMailOrderPharmacyClick} class="slds-m-right_x-small">
                    
                                                </lightning-button>
                                            </div>
                                        </template>
                                        <template if:true={showMailOrderRegister}>
                                            <div class="slds-m-left_x-small">
                                                <lightning-button variant="brand-outline" label="Mail Order – Register" title="Mail Order – Register" onclick={handleMailOrderRegisterClick} class="slds-m-right_x-small">
                    
                                                </lightning-button>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="slds-col slds-grid_align-end">

					<!--Logging Component-->
					 <template if:true={showLoggingIcon}>
						<div class="slds-float_right">
                                <c-lightning-logging-component-hum record-id={recordId} related-field={memberPlanName} auto-logging={autoLogging} type="MemberPlan"
															   subtype="MemberPlan Details" attachmentkey={personid}
															   attachmentdescription="Member plan External Id">
							    </c-lightning-logging-component-hum>
						</div>
                    </template>
                    <!--RTI Component-->
               <template if:true={showRTISection}>
                   <div class="slds-is-relative slds-float_right slds-m-right_medium ">
                       <c-rti-icon-hum record-id={recordId} recordtype={recordtype}></c-rti-icon-hum>
                   </div>
               </template>
                    <div class="slds-float_right">
                        <c-generic-alerts-view-hum record-id={sMemberId} member-plan-record-id={recordId}
                        other-page-name="Plan Member"></c-generic-alerts-view-hum>
                    </div>
                </div>
            </div>
        </div>
        <div class="slds-grid slds-grid_align-spread slds-page-header__row slds-grid_vertical-align-center">
            <div class="icons-container slds-grid">
                <!--3082787:Implementation for Icon display-->
                <!-- <template for:each={memberIcons} for:item="item">
                      <template if:true={item.bIconVisible}>
                          <div key={item.sIconName}
                              class="member-icons slds-p-top_medium slds-grid slds-p-right_large slds-is-relative">
                              <image key={item.sIconName} src={item.sDocumentId} class="icon-member"></image>
                              <c-custom-tooltip-hum key={item.sIconName} help-text={item.sIconLabel}></c-custom-tooltip-hum>
                          </div>
                      </template>
                 </template>-->
                <!--Added to pass member icon list to the child component-->
                <c-common-highlight-panel-icon-hum></c-common-highlight-panel-icon-hum>

            </div>
            <div class="slds-grid">
                <template if:true={showInteractions}>
                    <c-interaction-buttons-hum s-record-id={sMemberId} member-plan=true s-page-name="Policy Member"
                                               s-plan-id={recordId}>
                    </c-interaction-buttons-hum>
                </template>
            </div>
        </div>
        <div if:true={bDataLoaded} class="slds-page-header__row slds-page-header__row_gutters" onclick={handleLogging}>
            <div class="slds-page-header__col-details">
                <div class="slds-grid slds-page-header__detail-row slds-p-top_none slds-p-bottom_none">
                    <template for:each={oFormFields} for:item='detail'>
                        <lightning-layout-item padding="around-small" class="slds-page-header__detail-block slds-col slds-is-relative"
                                               key={detail.label}>
                            <div class="slds-truncate field-title logthis" title={detail.label} data-id={detail.label}><b>{detail.label}</b></div>
                            <div class="slds-truncate" if:false={detail.bIsCustom}>
                                <div if:false={detail.showIcon} class="details-text-wrap" data-value={detail.label}>
                                    {detail.value}
                                    <c-custom-tooltip-hum if:true={detail.copyToClipBoard} class="slds-show_inline-block" onclick={copyToBoard} data-field={detail.mapping}
                                                          icon-type=true help-text={copyClipBoardMsg} icon-position=true align="left"></c-custom-tooltip-hum>
                                </div>
                                <div if:true={detail.showIcon} class="value-field">
                                    <span class={detail.iconCls}></span>
                                    <span data-value={detail.label}>{detail.value}</span>
                                </div>
                            </div>
                        </lightning-layout-item>
                    </template>
                </div>
            </div>
        </div>
    </div>
</template>