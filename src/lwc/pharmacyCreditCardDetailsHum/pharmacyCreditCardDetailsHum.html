<!--
/*****************************************************************************************************************************
Component Name   : CreditCardIconHum.html
Version          : 1.0
Function         : lwc to display create card icon

Modification Log:
* Developer Name           Code Review                 Date                         Description
*---------------------------------------------------------------------------------------------------------------------
* Nirmal Garg																	12/06/2022					Original Version
*******************************************************************************************************************************************************************/
-->
<template>
    <lightning-card>
        <div class="slds-grid slds-grid_align-spread slds-wrap">
            <template if:true={loaded}>
                <template if:true={dataExist}>
                    <div class="slds-col slds-size_1-of-1">
                        <div class="slds-grid slds-grid_align-end">
                            <div class="slds-col">
                                <span>{numCards} item(s)</span>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_1-of-1">
                        <div class="slds-table--header-fixed_container">
                            <div class="slds-scrollable_y" style="height: 100%;">
                                <table
                                    class="slds-no-row-hover slds-table slds-table_bordered slds-table_cell-buffer slds-table--header-fixed">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <template for:each={creditCardInfoLayout} for:item="col">
                                                <th scope="col" key={col.label} style={col.style}
                                                    data-iconname={col.iconname} data-label={col.label}
                                                    data-id={col.mappingField} onmouseenter={handleMouseEnter}
                                                    onmouseleave={handleMouseLeave} onclick={onHandleSort}>
                                                    <div class="slds-p-top_x-small slds-truncate slds-cell-fixed"
                                                        title={col.label} style="width: 100%;">
                                                        {col.label}
                                                        <span>
                                                            <template if:false={col.mousehover}>
                                                                <template if:true={col.sorting}>
                                                                    <lightning-icon
                                                                        class="slds-var-m-left_small remove-display-sort-icon"
                                                                        icon-name={col.iconname} size="xx-small">
                                                                    </lightning-icon>
                                                                </template>
                                                            </template>
                                                            <template if:true={col.mousehover}>
                                                                <lightning-icon
                                                                    class="slds-var-m-left_small remove-display-sort-icon"
                                                                    icon-name={col.mousehovericon} size="xx-small">
                                                                </lightning-icon>
                                                            </template>
                                                        </span>
                                                    </div>
                                                </th>
                                            </template>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <template for:each={lstCreditCards} for:item="card">
                                            <tr class="slds-hint-parent" key={card.Id}>
                                                <td data-label="Card Type">
                                                    <div class="slds-wrap" title={card.CardType}>{card.CardType}
                                                    </div>
                                                </td>
                                                <td data-label="Last4Digits">
                                                    <div class="slds-wrap" title={card.Last4Digits}>{card.Last4Digits}
                                                    </div>
                                                </td>
                                                <td data-label="CardHolderName">
                                                    <div class="slds-wrap" title={card.CardHolderName}>
                                                        {card.CardHolderName}
                                                    </div>
                                                </td>
                                                <td data-label="ExpirationDate">
                                                    <div class="slds-wrap" title={card.ExpirationDate}>
                                                        {card.ExpirationDate}
                                                    </div>
                                                </td>
                                                <td data-label="AutoCharge">
                                                    <div class="slds-wrap" title={card.AutoCharge}>
                                                        {card.AutoCharge}
                                                    </div>
                                                </td>
                                                <td data-label="Status">
                                                    <div class="slds-wrap" title={card.Status}>
                                                        {card.Status}
                                                    </div>
                                                </td>
                                                <td data-label="SpendingAccount">
                                                    <div class="slds-wrap" title={card.SpendingAccount}>
                                                        {card.SpendingAccount}
                                                    </div>
                                                </td>
                                                <template if:true={card.IsEditIcon}>
                                                    <td data-label="SpendingAccount">
                                                        <div class="slds-wrap" title="Edit">
                                                            <lightning-button-icon alternative-text="Edit" title="Edit"
                                                                icon-name="utility:record_update" class="icon-settings"
                                                                onclick={handleRowAction}
                                                                data-cardkey={card.CreditCardKey}>
                                                            </lightning-button-icon>
                                                        </div>
                                                    </td>
                                                </template>
                                                <td data-label="ExpirationDate">
                                                    <div class="slds-wrap">
                                                        <template if:true={card.IconURL}>
                                                            <img title={card.IconLabel} src={card.IconURL}
                                                                class="icon-settings" />
                                                        </template>
                                                        <template if:false={card.IconURL}></template>
                                                    </div>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </template>
                <template if:false={dataExist}>
                    <div class="slds-col slds-size_1-of-1">
                      <c-generic-scoped-notification-hum iconname="utility:info"
                          message={labels.nocardmsg}>
                      </c-generic-scoped-notification-hum>
                    </div>
                </template>
            </template>
            <template if:false={loaded}>
                <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
            </template>
        </div>
    </lightning-card>
</template>