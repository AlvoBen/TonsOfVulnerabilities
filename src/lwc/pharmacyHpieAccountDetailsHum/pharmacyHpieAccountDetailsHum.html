<!--
Function        : LWC to callout HPIE Integration methods from apex .

Modification Log:
* Developer Name                  Date                         Description
****************************************************************************************************************************
* Nirmal Garg                    						 07/18/2022                user story 4861950, 4861945
* Atul Patil                    						 07/28/2023                user story 4861950, 4861945
* Jagadeesh Kureti                                       06/SEP/2023               User Story 5012565: T1PRJ0870026 MF27406 HPIE/CRM - SF Tech- Mail Order Management - Pharmacy - Details tab - Account details Edit fields
*****************************************************************************************************************************-->
<template>
    <div class="slds-box">
        <div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_6-of-12">
                <h4 class="slds-m-left_x-small">
                    <div class="slds-text-title_bold" style="font-size: 16px;">Account Details</div>
                </h4>
            </div>
            <div class="slds-col slds-size_6-of-12">
                <div class="slds-grid slds-grid_align-end slds-gutters">
                    <template if:true={isEditable}>
                        <div class="slds-col">
                            <lightning-button label="Cancel" onclick={handleCancel}>
                            </lightning-button>
                        </div>
                        <div class="slds-col">
                            <lightning-button label="Save" onclick={handleSaveClick} variant="brand"
                                              disabled={bValidData}>
                            </lightning-button>
                        </div>
                    </template>
                </div>
            </div>
        </div>
        <div class="slds-grid slds-wrap slds-m-top_x-small">
            <div class="slds-col slds-size_10-of-12">
                <div class="slds-grid slds-wrap">
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">First Name</span>
                            <div class="slds-form-element__control">
                                <template if:true={profileLoaded}>
                                    <div class="slds-form-element__static">{memberProfileDeatils.firstName}</div>
                                </template>
                                <template if:false={profileLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small" variant="brand">
                                        </lightning-spinner>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Middle Initial</span>
                            <div class="slds-form-element__control">
                                <template if:true={profileLoaded}>
                                    <div class="slds-form-element__static">{memberProfileDeatils.middleInitial}</div>
                                </template>
                                <template if:false={profileLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small" variant="brand">
                                        </lightning-spinner>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Last Name</span>
                            <div class="slds-form-element__control">
                                <template if:true={profileLoaded}>
                                    <div class="slds-form-element__static">{memberProfileDeatils.lastName}</div>
                                </template>
                                <template if:false={profileLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small" variant="brand">
                                        </lightning-spinner>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Date Of Birth</span>
                            <div class="slds-form-element__control">
                                <template if:true={profileLoaded}>
                                    <div class="slds-form-element__static">{memberProfileDeatils.dateOfBirth}</div>
                                </template>
                                <template if:false={profileLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small" variant="brand">
                                        </lightning-spinner>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <template if:true={isEditable}>
                                <div class="slds-grid slds-wrap">
                                    <div class="slds-col slds-size_10-of-12">
                                        <span>
                                            <lightning-input type="phone" itemid="four" data-id="reset"
                                                             name="memberPrimaryPhone" class="resetvalue1"
                                                             pattern="^\(\d{3}\)\s\d{3}-\d{4}$"
                                                             message-when-pattern-mismatch="Phone number is not valid"
                                                             placeholder="(000)000-0000" onchange={handleChange}
                                                             label="Primary Phone" value={memberPrimaryPhone}>
                                            </lightning-input>
                                        </span>
                                    </div>
                                    <div class="slds-col slds-size_2-of-12 slds-m-top_large">
                                        <span>
                                            <lightning-button-icon name="primaryPhone" icon-name="utility:edit"
                                                                   onclick={editMemberDetails} variant="bare"
                                                                   alternative-text="edit">
                                            </lightning-button-icon>
                                        </span>
                                    </div>
                                </div>
                            </template>
                            <template if:false={isEditable}>
                                <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                                    <span class="slds-form-element__label">Primary Phone</span>
                                    <div class="slds-form-element__control">
                                        <template if:true={addressLoaded}>
                                            <div class="slds-form-element__static">
                                                <p>
                                                    <lightning-icon icon-name="utility:end_call" size="xx-small"
                                                                    title="Primary Phone">
                                                    </lightning-icon>
                                                    <lightning-formatted-phone value={memberPrimaryPhone} disabled>
                                                    </lightning-formatted-phone>
                                                </p>
                                            </div>
                                            <lightning-button-icon name="primaryPhone" icon-name="utility:edit"
                                                                   onclick={editMemberDetails} variant="bare" alternative-text="edit">
                                            </lightning-button-icon>
                                        </template>
                                        <template if:false={addressLoaded}>
                                            <div class="exampleHolder">
                                                <lightning-spinner alternative-text="Loading" size="small"
                                                                   variant="brand">
                                                </lightning-spinner>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <template if:true={isEditable}>
                                <div class="slds-grid slds-wrap">
                                    <div class="slds-col slds-size_10-of-12">
                                        <span>
                                            <lightning-input type="phone"
                                                             data-id="reset" name="memberAlternatePhone"
                                                             class="resetvalue1"
                                                             pattern="^\(\d{3}\)\s\d{3}-\d{4}$"
                                                             message-when-pattern-mismatch="Phone number is not valid"
                                                             placeholder="(000)000-0000" onchange={handleChange}
                                                             label="Mobile/Alternate Phone" value={memberAlternatePhone}>
                                            </lightning-input>
                                        </span>
                                    </div>
                                    <div class="slds-col slds-size_2-of-12 slds-m-top_large">
                                        <span>
                                            <lightning-button-icon name="alternatePhone" icon-name="utility:edit"
                                                                   onclick={editMemberDetails} variant="bare" alternative-text="edit">
                                            </lightning-button-icon>
                                        </span>
                                    </div>
                                </div>
                            </template>
                            <template if:false={isEditable}>
                                <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                                    <span class="slds-form-element__label">Mobile/Alternate Phone</span>
                                    <div class="slds-form-element__control">
                                        <template if:true={addressLoaded}>
                                            <div class="slds-form-element__static">
                                                <p>
                                                    <lightning-icon icon-name="utility:end_call" size="xx-small"
                                                                    title="Mobile/Alternate Phone">
                                                    </lightning-icon>
                                                    <lightning-formatted-phone value={memberMobile} disabled>
                                                    </lightning-formatted-phone>
                                                </p>
                                            </div>
                                            <lightning-button-icon name="alternatePhone" icon-name="utility:edit"
                                                                   onclick={editMemberDetails} variant="bare" alternative-text="edit">
                                            </lightning-button-icon>
                                        </template>
                                    </div>
                                    <template if:false={addressLoaded}>
                                        <div class="exampleHolder">
                                            <lightning-spinner alternative-text="Loading" size="small" variant="brand">
                                            </lightning-spinner>
                                        </div>
                                    </template>
                                </div>
                            </template>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <template if:true={isEditable}>
                                <div class="slds-grid slds-wrap">
                                    <div class="slds-col slds-size_10-of-12">
                                        <span>
                                            <template if:true={isEmailReadyOnly}>
                                                <lightning-input type="email" id="memberEmail" name="memberEmail"
                                                                 data-id="reset" onchange={handleChange} label="Email"
                                                                 placeholder="test@humana.com" value={memberProfileDeatils.email}>
                                                </lightning-input>
                                            </template>
                                        </span>
                                    </div>
                                    <div class="slds-col slds-size_2-of-12 slds-m-top_large">
                                        <span>
                                            <lightning-button-icon name="memberEmail" icon-name="utility:edit"
                                                                   onclick={editMemberDetails} variant="bare" alternative-text="edit">
                                            </lightning-button-icon>
                                        </span>
                                    </div>
                                </div>
                            </template>
                            <template if:false={isEditable}>
                                <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                                    <span class="slds-form-element__label">Email</span>
                                    <div class="slds-form-element__control">
                                        <template if:true={profileLoaded}>
                                            <template if:true={isEmailReadyOnly}>
                                                <template if:true={profileDetails}>
                                                    <div class="slds-form-element__static">{memberProfileDeatils.email}</div>
                                                </template>
                                                <lightning-button-icon name="memberEmail" icon-name="utility:edit"
                                                                       onclick={editMemberDetails} variant="bare" alternative-text="edit">
                                                </lightning-button-icon>
                                            </template>
                                            <template if:false={isEmailReadyOnly}>
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-col slds-size_10-of-12">
                                                    </div>
                                                    <div class="slds-col slds-size_2-of-12">
                                                        <lightning-button-icon name="memberEmail"
                                                                               icon-name="utility:edit" onclick={editMemberDetails}
                                                                               variant="bare" alternative-text="edit">
                                                        </lightning-button-icon>
                                                    </div>
                                                </div>
                                            </template>
                                        </template>
                                        <template if:false={profileLoaded}>
                                            <div class="exampleHolder">
                                                <lightning-spinner alternative-text="Loading" size="small"
                                                                   variant="brand">
                                                </lightning-spinner>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Declined Email</span>
                            <div class="slds-form-element__control">
                                <lightning-input type="checkbox" data-id="reset" name="declinedEmail" data-name="active"
                                                 onchange={displayStatus} checked={declinedEmail} disabled={declinedDisabled}>
                                </lightning-input>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Permanent Address</span>
                            <div class="slds-form-element__control">
                                <template if:true={addressLoaded}>
                                    <div class="slds-form-element__static slds-wrap slds-text-body_small"
                                         title={memberPermanentAddress}>
                                        <template if:true={memberPermanentAddress}>
                                            <lightning-formatted-address street={permanentHomeStreet} disabled
                                                                         city={memberPermanentAddress.city} country="US"
                                                                         province={memberPermanentAddress.stateCode}
                                                                         postal-code={memberPermanentAddress.zipCode}>
                                            </lightning-formatted-address>
                                        </template>
                                    </div>
                                </template>
                                <template if:false={addressLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small" variant="brand">
                                        </lightning-spinner>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Plan Type</span>
                            <div class="slds-form-element__control">
                                <div class="slds-form-element__static">{planType}</div>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Effective Date</span>
                            <div class="slds-form-element__control">
                                <div class="slds-form-element__static">{effectiveDate}</div>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                            <span class="slds-form-element__label">Termination Date</span>
                            <div class="slds-form-element__control">
                                <div class="slds-form-element__static">{teminationDate}</div>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-p-around_x-small">
                        <div class="slds-grid slds-grid_align-end">
                            <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                                <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                                    <template if:true={isEditable}>
                                        <div class="slds-grid slds-wrap">
                                            <div class="slds-col slds-size_10-of-12">
                                                <span>
                                                    <lightning-combobox name="capType" label="Cap Type" data-id="reset"
                                                                        value={capType} placeholder="E" options={capTypes}
                                                                        onchange={handleChange} class="resetvalue">
                                                    </lightning-combobox>
                                                </span>
                                            </div>
                                            <div class="slds-col slds-size_2-of-12 slds-m-top_large">
                                                <span>
                                                    <lightning-button-icon name="capType" icon-name="utility:edit"
                                                                           onclick={editMemberDetails} variant="bare"
                                                                           alternative-text="edit">
                                                    </lightning-button-icon>
                                                </span>
                                            </div>
                                        </div>
                                    </template>
                                    <template if:false={isEditable}>
                                        <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                                            <span class="slds-form-element__label">Cap Type</span>
                                            <div class="slds-form-element__control">
                                                <template if:true={preferenceLoaded}>
                                                    <div class="slds-form-element__static">{capType}</div>
                                                    <lightning-button-icon name="capType" icon-name="utility:edit"
                                                                           onclick={editMemberDetails} variant="bare"
                                                                           alternative-text="edit">
                                                    </lightning-button-icon>
                                                </template>
                                            </div>
                                            <template if:false={preferenceLoaded}>
                                                <div class="exampleHolder">
                                                    <lightning-spinner alternative-text="Loading" size="small"
                                                                       variant="brand">
                                                    </lightning-spinner>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                            </div>
                            <template lwc:if={isMemberConsentRequired}>
                                <div class="slds-col slds-size_3-of-12 slds-p-around_x-small">
                                    <div class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent">
                                        <span class="slds-form-element__label">Member Consent</span>
                                        <div class="slds-form-element__control">
                                            <template if:true={preferenceLoaded}>
                                                <div class="slds-form-element__static slds-text-body_small">
                                                    {memberConsent}
                                                </div>
                                            </template>
                                            <template if:false={preferenceLoaded}>
                                                <div class="exampleHolder">
                                                    <lightning-spinner alternative-text="Loading" size="small"
                                                                       variant="brand">
                                                    </lightning-spinner>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slds-col slds-size_2-of-12 slds-m-top_medium">
                <div class={bgColor}>
                    <div class="custom-box slds-m-vertical_medium">
                        <p class="data-style"><b>Account Balance</b></p>
                        <template lwc:if={financeLoaded}>
                            <div class="exampleHolder">
                                <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                            </div>
                        </template>
                        <template lwc:else>
                            <lightning-formatted-number class="slds-text-heading_large slds-text-align_left data-style"
                                                        value={accountBalance} format-style="currency" currency-code="USD"
                                                        currency-display-as="symbol">
                            </lightning-formatted-number>
                        </template>
                        <div class="slds-m-top_xx-small">
                            <div class="slds-border_bottom">
                            </div>
                        </div>
                        <p class="slds-text-body_regular slds-text-align_left data-style">Account Limit</p>
                        <div>
                            <template lwc:if={financeLoaded}>
                                <div class="exampleHolder">
                                    <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                                </div>
                            </template>
                            <template lwc:else>
                                <lightning-formatted-number class="slds-text-heading_medium slds-text-align_left data-style"
                                                            value={accountLimit} format-style="currency" currency-code="USD"
                                                            currency-display-as="symbol">
                                </lightning-formatted-number>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>