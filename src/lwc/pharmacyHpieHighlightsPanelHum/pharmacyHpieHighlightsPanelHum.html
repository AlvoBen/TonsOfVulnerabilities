<!--
Function        : LWC to callout HPIE Integration methods from apex .

Modification Log:
* Developer Name                  Date                         Description
****************************************************************************************************************************
* Nirmal Garg                    						 07/18/2022                user story 4861950, 4861945
* Atul Patil                    						 07/28/2023                user story 4861950, 4861945
* Isaac Chung                   						 11/06/2023                US 5306769 - Next Best Action, Add Mail Order Page to NBA Engine - Interim Solution
* Pinky Vijur                                            03/01/2024                User Story 5428942: T1PRJ0865978- MF21712 Mail Order Management; Pharmacy- Guided Flow- Web Issues- Launch from pharmacy
*****************************************************************************************************************************-->
<template>
    <div>
        <template if:true={serviceError}>
            <div class="slds-grid slds-grid_align-spread">
                <div class="slds-col slds-size_1-of-1 slds-m-vertical_small">
                    <c-generic-scoped-notification-hum iconname="utility:error" message={message} type="error">
                    </c-generic-scoped-notification-hum>
                </div>
            </div>
        </template>
        <template if:false={serviceError}>
            <div class="slds-page-header slds-page-header_record-home">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-standard-opportunity">
                                    <lightning-icon slot="media" icon-name="standard:contact"></lightning-icon>
                                </span>
                            </div>
                            <div class="slds-media__body">
                                <div class="slds-page-header__name">
                                    <div class="slds-page-header__name-title">
                                        <h1>
                                            <span>Mail Order Pharmacy</span>
                                            <template if:true={profileLoaded}>
                                                <span class="slds-page-header__title slds-truncate"
                                                      title={memberName}>
                                                    {memberName}
                                                </span>
                                            </template>
                                            <template if:false={profileLoaded}>
                                                <div class="exampleHolder">
                                                    <lightning-spinner alternative-text="Loading" size="small"
                                                                       variant="brand">
                                                    </lightning-spinner>
                                                </div>
                                            </template>
                                        </h1>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-grid_align-spread slds-grid_vertical-align-center">
                            <div class="icons-container slds-grid">
                                <template for:each={memberIcons} for:item="item">
                                    <template if:true={item.bIconVisible}>
                                        <div key={item.sIconName}
                                             class="member-icons slds-p-top_medium slds-p-right_large slds-is-relative">
                                            <img src={item.sDocumentId} class="icon-member" title={item.sIconLabel}
                                                 style="height: 24px; width: 24px;">
                                        </div>
                                    </template>
                                </template>
                            </div>
                        </div>
                    </div>
                    <div class="slds-page-header__col-actions">
                        <div class="slds-page-header__controls">
                            <div class="slds-page-header__control">
                                <ul class="slds-button-group-list">
                                    <li>
                                        <div class="alertContainer">
                                            <c-generic-alerts-view-hum record-id={accountId}
                                                                       other-page-name="Mail Order Pharmacy"
                                                                       member-plan-record-id={memberPlanId}>
                                            </c-generic-alerts-view-hum>
                                        </div>
                                    </li>
                                    <li>
                                        <template if:true={bShowDemographicsWarning}>
                                            <lightning-icon icon-name="utility:warning" size="medium"
                                                            class="slds-var-p-right_small" alternative-text="Warning!" title="Warning"
                                                            variant="error">
                                            </lightning-icon>
                                        </template>
                                    </li>
                                    <li>
                                        <lightning-button label="Verify Demographics" title="Verify Demographics"
                                                          class="slds-float_right" onclick={verifyDemographicsData}>
                                        </lightning-button>
                                    </li>
                                    <li>
                                        <lightning-button label="New Case" title="New Case" class="slds-float_right"
                                                          onclick={newCaseClick}></lightning-button>
                                    </li>
                                    <li>
                                        <lightning-button label="Web Issues" title="Web Issues" class="slds-float_right"
                                            onclick={navigateToFlow}>
                                        </lightning-button>
                                    </li>
                                    <li>
                                        <template if:true={bCreatingCase}>
                                            <div class="exampleHolder">
                                                <lightning-spinner alternative-text="Loading"
                                                                   size="small"></lightning-spinner>
                                            </div>
                                        </template>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slds-page-header__row slds-page-header__row_gutters">
                    <div class="slds-page-header__col-details">
                        <lightning-layout horizontal-align="spread" class="slds-page-header__detail-row">
                            <lightning-layout-item flexibility="auto" padding="around-small">
                                <div class="slds-text-title slds-truncate" title="Account ID">Account ID</div>
                                <template if:true={profileLoaded}>
                                    <div class="slds-truncate" title={accountNumber}>{accountNumber}</div>
                                </template>
                                <template if:false={profileLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small"
                                                           variant="brand"></lightning-spinner>
                                    </div>
                                </template>
                            </lightning-layout-item>
                            <lightning-layout-item flexibility="auto" padding="around-small">
                                <div class="slds-text-title slds-truncate" title="Date of Birth">Date of Birth</div>
                                <template if:true={profileLoaded}>
                                    <div class="slds-truncate" title={memberDOB}>{memberDOB}</div>
                                </template>
                                <template if:false={profileLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small"
                                                           variant="brand"></lightning-spinner>
                                    </div>
                                </template>
                            </lightning-layout-item>
                            <lightning-layout-item flexibility="auto" padding="around-small">
                                <div class="slds-text-title slds-truncate" title="Shipping Address">Shipping Address</div>
                                <template if:true={addressLoaded}>
                                    <template if:true={shippingAddress}>
                                        <div title={shippingAddress}>
                                            <lightning-formatted-address street={shippingHomeStreet}
                                                                         city={shippingAddress.city} country="US"
                                                                         province={shippingAddress.stateCode} postal-code={shippingAddress.zipCode} disabled>
                                            </lightning-formatted-address>
                                        </div>
                                    </template>
                                </template>
                                <template if:false={addressLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small"
                                                           variant="brand"></lightning-spinner>
                                    </div>
                                </template>
                            </lightning-layout-item>
                            <lightning-layout-item flexibility="auto" padding="around-small">
                                <div class="slds-text-title slds-truncate" title="Email">Email</div>
                                <template if:true={profileLoaded}>
                                    <div class="slds-truncate" title={memberEmail}>{memberEmail}</div>
                                </template>
                                <template if:false={profileLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small"
                                                           variant="brand"></lightning-spinner>
                                    </div>
                                </template>
                            </lightning-layout-item>
                            <lightning-layout-item flexibility="auto" padding="around-small">
                                <div class="slds-text-title slds-truncate" title="Account Balance">Account Balance</div>
                                <template if:true={financeLoaded}>
                                    <div class={foreColor}>
                                        <lightning-formatted-number value={accountBalance} format-style="currency"
                                                                    currency-code="USD" currency-display-as="symbol">
                                        </lightning-formatted-number>
                                    </div>
                                </template>
                                <template if:false={financeLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small"
                                                           variant="brand"></lightning-spinner>
                                    </div>
                                </template>
                            </lightning-layout-item>
                            <lightning-layout-item flexibility="auto" padding="around-small">
                                <div class="slds-text-title slds-truncate" title="Account Limit">Account Limit</div>
                                <template if:true={financeLoaded}>
                                    <div class="slds-truncate">
                                        <lightning-formatted-number value={accountLimit} format-style="currency"
                                                                    currency-code="USD" currency-display-as="symbol">
                                        </lightning-formatted-number>
                                    </div>
                                </template>
                                <template if:false={financeLoaded}>
                                    <div class="exampleHolder">
                                        <lightning-spinner alternative-text="Loading" size="small"
                                                           variant="brand"></lightning-spinner>
                                    </div>
                                </template>
                            </lightning-layout-item>
                            <lightning-layout-item flexibility="auto" padding="around-small">
                                <div class="slds-text-title slds-truncate"
                                     title="Medication Therapy Management (MTM) Eligibility">MTM Eligibility</div>
                                <div class="slds-truncate mtmCheckbox-align">
                                    <lightning-input type="checkbox" name="cbkMTM" disabled="true" checked={mtmElegibility}>
                                    </lightning-input>
                                </div>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                </div>
            </div>
        </template>
    </div>
</template>