<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log-configuration SYSTEM "log-configuration.dtd">

<log-configuration>

  <log-formatters>
    <log-formatter name="perf_formatter" type="com.sap.tc.logging.perf.PerfFormatter"/>

    <log-formatter name="http_access_formatter" type="TraceFormatter" pattern="[%25d] - %m"/>

    <log-formatter name="http_clf_formatter" type="TraceFormatter" pattern="%m"/>
    
    <log-formatter name="smd_access_formatter" type="TraceFormatter" pattern="[%25d] - %m"/>
    
    <log-formatter name="ShortDumpBodyFormatter" type="com.sap.engine.lib.logging.ShortDumpBodyFormatter"/>

    <log-formatter name="ShortDumpHeaderFormatter" type="com.sap.engine.lib.logging.ShortDumpHeaderFormatter"/>
  </log-formatters>


  <log-destinations>
    <log-destination name="system_server_log"   type="FileLog" pattern="./log/system/server_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="system_network_log"  type="FileLog" pattern="./log/system/network_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="system_security_log" type="FileLog" pattern="./log/system/security_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="security_audit_log" type="FileLog" pattern="./log/system/security_audit_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="system_database_log" type="FileLog" pattern="./log/system/database_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="system_logging_log"  type="FileLog" pattern="./log/system/logging_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="system_userinterface_log" type="FileLog" pattern="./log/system/userinterface_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="config_changes_log" type="FileLog" pattern="./log/system/configChanges_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="logging_log" type="FileLog" pattern="./log/system/logging_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="applications_log"    type="FileLog" pattern="./log/applications_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="usersession_log"     type="FileLog" pattern="./log/usersession_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="change_log"     type="FileLog" pattern="../change/log/changes_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="2097152"/>

    <log-destination name="system_load_log"     type="FileLog" pattern="./sysload/log/systemLoad_${NODE_INDEX}.trc"
                     effective-severity="ALL" count="5" limit="10485760"/>

    <log-destination name="enterprise_services_log"     type="FileLog" pattern="./log/system/enterprise_services_${NODE_INDEX}.log"
                     effective-severity="ALL" count="5" limit="10485760"/>

	<log-destination name="performance_log"     type="FileLog" pattern="./log/sat_${NODE_INDEX}.trc"
                     effective-severity="ALL" count="5" limit="10485760">
      <formatter-ref name="perf_formatter"/>
    </log-destination>

    <log-destination name="default_trace" type="FileLog" pattern="./log/defaultTrace_${NODE_INDEX}.trc"
                     effective-severity="ALL" count="20" limit="10485760"/>

    <log-destination name="http_access_log" type="FileLog" pattern="./log/system/httpaccess/responses_${NODE_INDEX}.trc"
                     effective-severity="ALL" count="5" limit="10485760">
        <formatter-ref name="http_access_formatter"/>
    </log-destination>

    <log-destination name="http_clf_log" type="FileLog" pattern="./log/system/httpaccess/responses-clf_${NODE_INDEX}.trc"
                     effective-severity="ALL" count="5" limit="10485760">
        <formatter-ref name="http_clf_formatter"/>
    </log-destination>
    
    <log-destination name="smd_access_log" type="FileLog" pattern="./log/system/httpaccess/smdresponses_${NODE_INDEX}.trc"
                     effective-severity="ALL" count="5" limit="10485760">
        <formatter-ref name="smd_access_formatter"/>
    </log-destination>

    <log-destination name="deploy_log" type="FileLog" pattern="${INSTANCE_DIR}/work/deploy.log"
                     effective-severity="ALL" count="15" limit="1048576">
    </log-destination>

    <log-destination name="deploy_trace" type="FileLog" pattern="${INSTANCE_DIR}/work/deploy.trc"
                     effective-severity="ALL" count="15" limit="1048576">
    </log-destination>

    
    <!-- Aditional log destination for short dump  with parametrized value   - in ../j2ee/ShortDump/ -->
    <log-destination name="short_dump_header" type="FileLog" pattern="../../shortdump/${INSTANCE_HOST}_${SYSTEM_NAME}_${INSTANCE_NUMBER}_${NODE_INDEX}_header.trc"
                     effective-severity="ALL" count="4" limit="5242880">
                     <formatter-ref name="ShortDumpHeaderFormatter"/>
    </log-destination>

    <log-destination name="short_dump_body" type="FileLog" pattern="../../shortdump/${INSTANCE_HOST}_${SYSTEM_NAME}_${INSTANCE_NUMBER}_${NODE_INDEX}_body.trc"
                     effective-severity="ALL" count="10" limit="10485760">
					 <formatter-ref name="ShortDumpBodyFormatter"/>
    </log-destination>
  </log-destinations>


  <log-controllers>
    <log-controller name="" effective-severity="ERROR">
      <associated-destinations>
        <destination-ref name="default_trace" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="System.err" effective-severity="ERROR"/>

    <log-controller name="System.out" effective-severity="ERROR"/>


    <log-controller name="/" effective-severity="INFO"/>

    <log-controller name="/System/Configuration" effective-severity="INFO"/>

    <log-controller name="/System/Configuration/ConfigManagerChangeLogs" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="config_changes_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/Configuration/Logging" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="logging_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>
    
    <log-controller name="/System/Changes" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="change_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/Server" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="system_server_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/Network" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="system_network_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/Security" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="system_security_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/Security/Audit" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="security_audit_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/Database" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="system_database_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/Logging" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="system_logging_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/UserInterface" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="system_userinterface_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/EnterpriseServices" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="enterprise_services_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

	<log-controller name="/UserSession" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="usersession_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/Performance" effective-severity="INFO">
      <!-- Single Activity Trace -->
      <associated-destinations>
        <destination-ref name="performance_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/Applications" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="applications_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/LoadObserver/SystemLoad" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="system_load_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/Applications/Common/Backup" effective-severity="INFO"/>

    <log-controller name="/Applications/Common/Archiving" effective-severity="INFO"/>

    <log-controller name="/Applications/Common/Resources" effective-severity="INFO"/>

    <log-controller name="/Applications/Common/Configuration" effective-severity="INFO"/>

    <log-controller name="/Applications/Common/Security" effective-severity="INFO"/>

    <log-controller name="/Applications/Common/Failover" effective-severity="INFO"/>

    <log-controller name="/Applications/Common/Infrastructure" effective-severity="INFO"/>
    
    <log-controller name="/Applications/CTC" effective-severity="INFO"/>
    
    <log-controller name="/Applications/CTC/LIB" effective-severity="INFO"/>

    <log-controller name="/System/HttpAccess/Access" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="http_access_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="/System/HttpAccess/CommonLogFormat" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="http_clf_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="com.sap.engine.services.httpserver.server.Smd" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="smd_access_log" association-type="PRIVATE_LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="com.sap.ctc.util" effective-severity="ERROR"/>

    <log-controller name="com.sap.engine.boot" effective-severity="ERROR"/>

	<!-- Warning severities of AS Java components requested by Krasimir Semerdzhiev -->
    <log-controller name="com.sap.engine.bootstrap" effective-severity="WARNING"/>
	<log-controller name="com.sap.engine.core" effective-severity="WARNING"/>
    <log-controller name="com.sap.engine.frame" effective-severity="WARNING"/>
    <log-controller name="com.sap.engine.lib.config" effective-severity="WARNING"/>
    <log-controller name="com.sap.engine.services.deploy" effective-severity="WARNING"/>
    <log-controller name="com.sap.engine.services.dc" effective-severity="WARNING"/>
    <log-controller name="com.sap.engine.services.http" effective-severity="WARNING"/>
    <log-controller name="com.sap.engine.services.rmi_p4" effective-severity="WARNING"/>

    <log-controller name="/System/Server/DeploymentExt" effective-severity="INFO">
      <associated-destinations>
        <destination-ref name="deploy_log" association-type="LOG"/>
      </associated-destinations>
    </log-controller>

    <log-controller name="com.sap.engine.services.tc~bl~deploy_controller_ext" effective-severity="PATH">
      <associated-destinations>
        <destination-ref name="deploy_trace" association-type="LOG"/>
      </associated-destinations>
    </log-controller>


    <!-- This location is used by security to avoid writing security logs in the default trace -->
    <log-controller name="com.sap.security.core.util.SecurityAudit" effective-severity="NONE"/>

    <!-- 
        Additional log controlers for external library packages.You may add your
        destination to the listed ones in order to receive library logs in you
        log files.
      -->

    <!-- Open SQL library -->
    <log-controller name="com.sap.sql" effective-severity="ERROR"/>

      
    <!-- Aditional log controller for Short Dump    -->
    <log-controller name="ShortDumpHeader" effective-severity="ERROR">
		<associated-destinations>
			<destination-ref name="short_dump_header" association-type="PRIVATE_LOG"/>
	    </associated-destinations>
    </log-controller>
    
    <log-controller name="ShortDumpBody" effective-severity="ERROR">
		<associated-destinations>
			<destination-ref name="short_dump_body" association-type="PRIVATE_LOG"/>
	    </associated-destinations>
    </log-controller>
  </log-controllers>

</log-configuration>
